<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Smit, A. J.">
<meta name="dcterms.date" content="2021-01-01">
<title>13. Tidier Data – The Tangled Bank</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../BCB744/intro_r/14-tidiest.html" rel="next">
<link href="../../BCB744/intro_r/12-tidy.html" rel="prev">
<link href="../../images/favicon.ico" rel="icon">
<script src="../../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-59898bd1c6b9d2bb783127feaa000c76.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-e72a6f14eebdb210cee67dab8470c671.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-SCYH68M489"></script><script type="text/plain" cookie-consent="tracking">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-SCYH68M489', { 'anonymize_ip': true});
</script><script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"headline",
  "consent_type":"express",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"en"
  });
});
</script><style>html{ scroll-behavior: smooth; }</style>
<script async="" src="https://hypothes.is/embed.js"></script><script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script><link rel="stylesheet" href="../../LesCodex2.css">
<meta property="og:title" content="13. Tidier Data – The Tangled Bank">
<meta property="og:description" content="UWC’s Biodiversity &amp; Conservation Biology Department Pages For BDC334, BCB743, and BCB744.">
<meta property="og:image" content="http://tangledbank.netlify.app/BCB744/intro_r/data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==">
<meta property="og:site_name" content="The Tangled Bank">
</head>
<body class="nav-sidebar floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">The Tangled Bank</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link active" href="../../index.html" aria-current="page"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-vignettes" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Vignettes</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-vignettes">
<li>
    <a class="dropdown-item" href="../../vignettes/netCDF_dates.html">
 <span class="dropdown-text">Dates From netCDF Files: Two Approaches</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../vignettes/prep_NOAA_OISST.html">
 <span class="dropdown-text">Downloading and Prep: ERDDAP</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../vignettes/chl_ERDDAP.html">
 <span class="dropdown-text">Retrieving Chlorophyll-a Data from ERDDAP Servers</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../vignettes/alt_method.html">
 <span class="dropdown-text">Downloading and Prep: Python + CDO</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../vignettes/gridded_data.html">
 <span class="dropdown-text">Detecting Events in Gridded Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../vignettes/regridding.html">
 <span class="dropdown-text">Regridding gridded data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../vignettes/MHW_MCS_horizonplots.html">
 <span class="dropdown-text">Displaying MHWs and MCSs as Horizon Plots</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../vignettes/heatwaveR_issues.html">
 <span class="dropdown-text">heatwaveR Issues</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../vignettes/chl_sightings.html">
 <span class="dropdown-text">Plotting the Whale Sightings and Chlorophyll-<em>a</em> Concentrations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../vignettes/chl_localisation.html">
 <span class="dropdown-text">Spatial Localisation, Subsetting, and Aggregation of the Chlorophyll-<em>a</em> Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../vignettes/elem_ts_methods.html">
 <span class="dropdown-text">Wavelet Analysis of Diatom Time Series</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../vignettes/buffer_data_extract.html">
 <span class="dropdown-text">Extracting gridded data within a buffer</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-high-performace-computing" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">High-Performace Computing</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-high-performace-computing">
<li>
    <a class="dropdown-item" href="../../vignettes/README_Lengau.html">
 <span class="dropdown-text">Using Lengau</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../vignettes/PBSPro_users.html">
 <span class="dropdown-text">PBSPro user and job management</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../vignettes/README_tmux.html">
 <span class="dropdown-text">Using tmux</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html"> 
<span class="menu-text">Tangled Bank Blog</span></a>
  </li>  
</ul>
<ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-blogroll" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Blogroll</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-blogroll">
<li>
    <a class="dropdown-item" href="https://www.r-bloggers.com">
 <span class="dropdown-text">R-bloggers</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item compact">
    <a class="nav-link" href="../../blog.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-bi-github" role="link" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-bi-github">
<li>
    <a class="dropdown-item" href="https://github.com/ajsmit/tangled_bank">
 <span class="dropdown-text">Source Code</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://bugs.com">
 <span class="dropdown-text">Report a Bug</span></a>
  </li>  
    </ul>
</li>
</ul>
</div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../BCB744/BCB744_index.html">BCB744: Introduction to R, &amp; Biostatistics</a></li><li class="breadcrumb-item"><a href="../../BCB744/intro_r/13-tidier.html">13. Tidier Data</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../../index.html" class="sidebar-logo-link">
      <img src="../../images/my_tree_hex.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none"></a>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item">
 <span class="menu-text">☘☘☘</span>
  </li>
        <li class="sidebar-item">
 <span class="menu-text">UNDERGRADUATE</span>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">BDC223: Plant Ecophysiology</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC223/BDC223_index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>About</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC223/L00-introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 0: Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC223/L01-worldmapper.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 1: Worldmapper</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC223/L02-SA_V.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 2: Surface Area to Volume (SA/V) Ratios in Biology</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC223/L03-plant_stress.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 3: Plant Stress</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC223/L04-carbon_cycle.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 4: Perturbations to the Carbon Cycle</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC223/L05-light.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 5: Light</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC223/L06a-pigments_photosynthesis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 6a: Pigments and Photosynthesis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC223/L06b-jassby_platt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 6b: PI Curves – Jassby and Platt</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC223/L07-chromatic_adaptation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 7: Chromatic Adaptation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC223/L08a-nutrient_uptake.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 8a: Nutrient Uptake</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC223/L08b-nutrients_michaelis_menten.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 8b: Uptake Kinetics – Michaelis-Menten</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC223/Lab1_SA_V.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 1: Surface Area to Volume (SA/V) Ratios in Biology</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC223/Lab2_misc_calcs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 2: Miscellaneous Calculations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC223/Lab3_PI_curves.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 3: PI Curves – Jassby and Platt</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC223/Lab4_nitrogen_uptake.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 4: Uptake Kinetics – Michaelis-Menten</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC223/BDC223_FAQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FAQ</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false">
 <span class="menu-text">BDC334: Biogeography &amp; Global Ecology</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC334/BDC334_syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>About</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC334/BDC334-Lecture-Transcripts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="my-highlight">BCB334 Lecture Transcript</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC334/Lec-01-introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 1: Introductory Lecture</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC334/Lec-02-ecosystems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 2. Overview of Ecosystems</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC334/Lec-03-gradients.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 3. Ecological Gradients</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC334/Lec-04-biodiversity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 4: Biodiversity Concepts</span></a>
  </div>
</li>
          <li class="sidebar-item">
 <span class="menu-text">Lecture 5. Multivariate Data</span>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC334/Lec-06-unified-ecology.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 6: Unified Ecology</span></a>
  </div>
</li>
          <li class="sidebar-item">
 <span class="menu-text">Lecture 7: Threats to Biodiversity</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">Lecture 8: Nature's Contribution to People</span>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC334/Lab-01-introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 1. Ecological Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC334/Lab-02a-r_rstudio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 2a. Introduction `R` &amp; RStudio</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC334/Lab-02b-env_dist.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 2b. Environmental Distance</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC334/Lab-03-biodiversity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 3. Quantifying Biodiversity</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BDC334/Lab-04-biodiversity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 4. Species Distribution Patterns</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../pages/Transboundary_systems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Transboundary systems</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item">
 <span class="menu-text">☘☘☘</span>
  </li>
        <li class="sidebar-item">
 <span class="menu-text">HONOURS CORE</span>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">BCB744: Introduction to R, &amp; Biostatistics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/BCB744_index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>About</strong></span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/intro_r/01-RStudio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1. R &amp; RStudio</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/intro_r/02-working-with-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2. Working With Data &amp; Code</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/intro_r/03-data-in-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3. Data Classes &amp; Structures</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/intro_r/04-workflow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4. R Workflows</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/intro_r/05-graphics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5. Graphics with <strong>ggplot2</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/intro_r/06-faceting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">6. Faceting Figures</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/intro_r/07-brewing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">7. Brewing Colours</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/intro_r/08-mapping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">8. Mapping With <strong>ggplot2</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/intro_r/09-mapping_style.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9. Mapping With Style</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/intro_r/10-mapping_rnaturalearth.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">10. Mapping With Natural Earth</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/intro_r/11-mapping_quakes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">11. The Fiji Earthquake Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/intro_r/12-tidy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">12. Tidy Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/intro_r/13-tidier.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">13. Tidier Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/intro_r/14-tidiest.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">14. Tidiest Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/intro_r/15-recap.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">15. Recap</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../assessments/BCB744_Intro_R_Self-Assessment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="my-highlight">Intro R Self-Assessment</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../assessments/examples/BCB744_Intro_R_Example_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">BCB744 Intro R Example 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../assessments/examples/BCB744_Intro_R_Example_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">BCB744 Intro R Example 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../self-assessment_v1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Self-Assessment Form</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../assessments/BCB744_Intro_R_Presentations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="my-highlight">Presentations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../assessments/BCB744_Intro_R_Test_2025.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="my-highlight">Intro R Test</span></span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/basic_stats/01-scientific-philosophy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1. Philosophy of Science</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/basic_stats/02-summarise-and-describe.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2. Data Summaries &amp; Descriptions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/basic_stats/03-visualise.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3. Statistical Figures</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/basic_stats/04-distributions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4. Data Distributions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/basic_stats/05-inference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5. Statistical Inference</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/basic_stats/06-assumptions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">6. Assumptions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/basic_stats/07-t_tests.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">7. <em>t</em>-Tests</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/basic_stats/08-anova.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">8. ANOVA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/basic_stats/09-regressions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9. Simple Linear Regressions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/basic_stats/10-correlations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">10. Correlations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/basic_stats/11-decision_guide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">11. Parametric Tests</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/basic_stats/12-glance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">12. Non-Parametric Tests</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/basic_stats/13-confidence.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">13. Confidence Intervals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB744/basic_stats/14-transformations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">14. Data Transformations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../assessments/BCB744_Biostatistics_Self-Assessment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="my-highlight">Biostatistics Self-Assessment</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../assessments/examples/BCB744_BioStats_Example_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">BCB744 BioStats 2025 Example 1</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item">
 <span class="menu-text">☘☘☘</span>
  </li>
        <li class="sidebar-item">
 <span class="menu-text">HONOURS ELECTIVES</span>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false">
 <span class="menu-text">BCB743: Quantitative Ecology</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB743/BCB743_index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>About</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB743/review.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-4: Review Concepts fo Biodiversity</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB743/correlations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5: Correlations &amp; Associations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB743/ordination.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">7: Intro to Ordination</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB743/PCA.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">8a: Principal Components Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB743/PCA_examples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">8b: PCA: Additional Examples</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB743/PCA_SDG_example.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">8c: PCA: WHO SDG Example</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB743/CA.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9a: Correspondence Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB743/DCA.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9b: Detrended Correspondence Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB743/PCoA.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">10: Principal Coordinates Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB743/nMDS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">11a: Non-metric Multidimensional Scaling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB743/nMDS_diatoms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">11b: nMDS: PERMANOVA (Diatoms) Example</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB743/unconstrained-summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">12: Unconstrained Ordination Summary</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB743/constrained_ordination.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">13a: Distance-Based Redundancy Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB743/two_oceans_appendices.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">13b: db-RDA: Seaweeds Example</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB743/cluster_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">14: Cluster Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB743/model_building.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">15: Model Building</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB743/deep_dive.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">16a: Deep Dive Into Gradients</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../BCB743/multiple_regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">16b: Multiple Regression</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item">
 <span class="menu-text">☘☘☘︎</span>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/Combined Faculty AI Policy 15082025.pdf" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Faculty of Natural Sciences AI Policy</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
 <span class="menu-text">☘☘☘︎</span>
  </li>
        <li class="sidebar-item">
 <span class="menu-text">SUPPORT</span>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false">
 <span class="menu-text">Web Resources</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../resources/general_resources_web.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R Resources</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../resources/ecology_resources_web.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quantitative Ecology Resources</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../resources/spatial_resources_web.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Spatial R Resources</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item">
 <span class="menu-text">☘☘☘︎</span>
  </li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li><a href="#comparison-and-logical-boolean-operators" id="toc-comparison-and-logical-boolean-operators" class="nav-link active" data-scroll-target="#comparison-and-logical-boolean-operators">Comparison and logical (Boolean) operators</a></li>
  <li><a href="#arrange-observations-rows-with-arrange" id="toc-arrange-observations-rows-with-arrange" class="nav-link" data-scroll-target="#arrange-observations-rows-with-arrange">Arrange observations (rows) with <code>arrange()</code></a></li>
  <li><a href="#filter-observations-rows-with-filter" id="toc-filter-observations-rows-with-filter" class="nav-link" data-scroll-target="#filter-observations-rows-with-filter">Filter observations (rows) with <code>filter()</code></a></li>
  <li><a href="#select-variables-columns-withselect" id="toc-select-variables-columns-withselect" class="nav-link" data-scroll-target="#select-variables-columns-withselect">Select variables (columns) with<code>select()</code></a></li>
  <li><a href="#create-new-variables-columns-with-mutate" id="toc-create-new-variables-columns-with-mutate" class="nav-link" data-scroll-target="#create-new-variables-columns-with-mutate">Create new variables (columns) with <code>mutate()</code></a></li>
  <li><a href="#summarise-variables-columns-with-summarise" id="toc-summarise-variables-columns-with-summarise" class="nav-link" data-scroll-target="#summarise-variables-columns-with-summarise">Summarise variables (columns) with <code>summarise()</code></a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/ajsmit/tangled_bank/edit/main/BCB744/intro_r/13-tidier.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/ajsmit/tangled_bank/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../BCB744/BCB744_index.html">BCB744: Introduction to R, &amp; Biostatistics</a></li><li class="breadcrumb-item"><a href="../../BCB744/intro_r/13-tidier.html">13. Tidier Data</a></li></ol></nav><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">13. Tidier Data</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author"><a href="https://tangledbank.netlify.app">Smit, A. J.</a> <a href="https://orcid.org/0000-0002-3799-6126" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            <a href="https://uwc.ac.za">
            University of the Western Cape
            </a>
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 1, 2021</p>
    </div>
  </div>
  
    
  </div>
  


</header><blockquote class="blockquote">
<p>“<em>Knowing where things are, and why, is essential to rational decision making.</em>”</p>
<p>— Jack Dangermond</p>
</blockquote>
<blockquote class="blockquote">
<p>“<em>The mind commands the body and it obeys. The mind orders itself and meets resistance.</em>”</p>
<p>— Frank Herbert, Dune</p>
</blockquote>
<p>On Day 1 already you worked through a tidy workflow. You saw how to import data, how to manipulate it, run a quick analysis or two, and create figures. In the previous session you filled in the missing piece of the workflow by also learning how to tidy up your data within R. For the remainder of today you will be revisiting the ‘transform’ portion of the tidy workflow. In this session you are going to go into more depth on what you learned in Day 1, and in the last session you will learn some new tricks. Over these two sessions you will also become more comfortable with the <em>pipe</em> command <code>%&gt;%</code>, while practising writing tidy code.</p>
<p>There are five primary data transformation functions that you will focus on here:</p>
<ul>
<li>Arrange observations (rows) with <code>arrange()</code><br>
</li>
<li>Filter observations (rows) with <code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code><br>
</li>
<li>Select variables (columns) with <code>select()</code><br>
</li>
<li>Create new variables (columns) with <code>mutate()</code><br>
</li>
<li>Summarise variables (columns) with <code>summarise()</code>
</li>
</ul>
<p>You will use the full South African Coastal Temperature Network dataset for these exercises. Before you begin, however, you will need to cover two new concepts.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># Load libraries</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-4"><a href="#cb1-4"></a></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="co"># Load the data from a .RData file</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="fu">load</span>(<span class="st">"../../data/SACTNmonthly_v4.0.RData"</span>)</span>
<span id="cb1-7"><a href="#cb1-7"></a></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="co"># Copy the data as a dataframe with a shorter name</span></span>
<span id="cb1-9"><a href="#cb1-9"></a>SACTN <span class="ot">&lt;-</span> SACTNmonthly_v4<span class="fl">.0</span></span>
<span id="cb1-10"><a href="#cb1-10"></a></span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="co"># Remove the original</span></span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="fu">rm</span>(SACTNmonthly_v4<span class="fl">.0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="comparison-and-logical-boolean-operators" class="level1"><h1>Comparison and logical (Boolean) operators</h1>
<p>The assignment operator (<code>&lt;-</code>) is a symbol that we use to assign some bit of code to an object in your environment. Likewise, <strong>comparison operators</strong> are symbols we use to compare different objects. This is how you tell R how to decide to do many different things. You will see these symbols often out in the ‘real world’ so let’s spend a moment now getting to know them better. Most of these should be very familiar to you already:</p>
<ul>
<li>
<code>&gt;</code>: Greater than<br>
</li>
<li>
<code>&gt;=</code>: Greater than or equal to</li>
<li>
<code>&lt;</code>: Less than</li>
<li>
<code>&lt;=</code>: Less than or equal to</li>
<li>
<code>==</code>: Equal to</li>
<li>
<code>!=</code> Not equal to</li>
</ul>
<p>It is important here to note that <code>==</code> is for comparisons and <code>=</code> is for maths. They are <em>not</em> interchangeable, as we may see in the following code chunk. This is one of the more common mistakes one makes when writing code. Luckily the error message this creates should provide us with the clues we need to figure out that we have made this specific mistake.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb2-2"><a href="#cb2-2"></a>  <span class="fu">filter</span>(<span class="at">site =</span> <span class="st">"Amanzimtoti"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>R&gt; Error in `filter()`:
R&gt; ! We detected a named input.
R&gt; ℹ This usually means that you've used `=` instead of `==`.
R&gt; ℹ Did you mean `site == "Amanzimtoti"`?</code></pre>
</div>
</div>
<p>The comparison operators are often used together with <strong>Boolean operators</strong>. Boolean operators are used for logical operations and can compare values, resulting in either <code>TRUE</code> or <code>FALSE</code>. Here they are:</p>
<ul>
<li>
<code>!</code>: NOT - Negates a true value to false, and a false value to true.</li>
<li>
<code>&amp;</code>: AND - Returns <code>TRUE</code> if both operands are true, and <code>FALSE</code> otherwise.</li>
<li>
<code>|</code>: OR - Returns <code>TRUE</code> if at least one of the operands is true.</li>
<li>
<code>&amp;&amp;</code>: AND (element-wise for vectors) - Similar to <code>&amp;</code>, but it only evaluates the first element of each vector operand.</li>
<li>
<code>||</code>: OR (element-wise for vectors) - Similar to <code>|</code>, but it only evaluates the first element of each vector operand.</li>
</ul>
<p>The <code>%in%</code> operator in R is a special operator used to test if elements of a vector or data object are contained in another vector or data object. It returns a Boolean vector (<code>TRUE</code> or <code>FALSE</code>) indicating whether each element of the first vector is found in the second vector. This operator is particularly useful for subsetting or filtering data based on matching values. For example, <code>x %in% y</code> will check for each element of <code>x</code> if there is a match in <code>y</code>, and return a logical vector indicating the presence or absence of each <code>x</code> element in <code>y</code>.</p>
<p>So, comparison operators are used to make direct comparisons between specific things, but logical operators are used more broadly when making logical arguments. Logic is central to most computing so it is worth taking the time to cover these symbols explicitly here. R makes use of the same <em>Boolean logic</em> symbols as many other platforms, including Google, so some (or all) of these will likely be familiar.</p>
<p>When writing a line of tidy code you tend to use these logical operator to combine two or more arguments that use comparison operators. For example, the following code chunk uses the <code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code> function to find all temperatures recorded at Pollock Beach during December <em>or</em> January. Don’t worry if the following line of code is difficult to piece out, but make sure you can locate which symbols are comparison operators and which are logical operators. Please note that for purposes of brevity all of the outputs in this section are limited to ten lines, but when you run these code chunks on your own computer they will be much longer.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="#cb4-2"></a>  <span class="fu">filter</span>(site <span class="sc">==</span> <span class="st">"Pollock Beach"</span>, <span class="fu">month</span>(date) <span class="sc">==</span> <span class="dv">12</span> <span class="sc">|</span> <span class="fu">month</span>(date) <span class="sc">==</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>R&gt;             site  src       date     temp depth   type
R&gt; 1  Pollock Beach SAWS 1999-12-01 19.95000     0 thermo
R&gt; 2  Pollock Beach SAWS 2000-01-01 19.03333     0 thermo
R&gt; 3  Pollock Beach SAWS 2000-12-01 19.20000     0 thermo
R&gt; 4  Pollock Beach SAWS 2001-01-01 18.32667     0 thermo
R&gt; 5  Pollock Beach SAWS 2001-12-01 20.59032     0 thermo
R&gt; 6  Pollock Beach SAWS 2002-01-01 21.47097     0 thermo
R&gt; 7  Pollock Beach SAWS 2002-12-01 19.78065     0 thermo
R&gt; 8  Pollock Beach SAWS 2003-01-01 20.64516     0 thermo
R&gt; 9  Pollock Beach SAWS 2003-12-01 20.48710     0 thermo
R&gt; 10 Pollock Beach SAWS 2004-01-01 21.34839     0 thermo</code></pre>
</div>
</div>
<p>You will look at the interplay between comparison and logical operators in more depth in the following session after you have reacquainted yourself with the main transformation functions you need to know.</p>
</section><section id="arrange-observations-rows-with-arrange" class="level1"><h1>Arrange observations (rows) with <code>arrange()</code>
</h1>
<p>First up in our greatest hits reunion tour is the function <code>arrange()</code>. This very simply arranges the observations (rows) in a dataframe based on the variables (columns) it is given. If you are concerned with ties in the ordering of our data you provide additional columns to <code>arrange()</code>. The importance of the columns for arranging the rows is given in order from left to right.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="#cb6-2"></a>  <span class="fu">arrange</span>(depth, temp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>R&gt;             site  src       date      temp depth   type
R&gt; 1      Sea Point SAWS 1990-07-01  9.635484     0 thermo
R&gt; 2     Muizenberg SAWS 1984-07-01  9.708333     0 thermo
R&gt; 3     Doringbaai SAWS 2000-12-01  9.772727     0 thermo
R&gt; 4  Hondeklipbaai SAWS 2003-06-01  9.775000     0 thermo
R&gt; 5      Sea Point SAWS 1984-06-01 10.000000     0 thermo
R&gt; 6     Muizenberg SAWS 1992-07-01 10.193548     0 thermo
R&gt; 7  Hondeklipbaai SAWS 2005-07-01 10.333333     0 thermo
R&gt; 8  Hondeklipbaai SAWS 2003-07-01 10.340909     0 thermo
R&gt; 9      Sea Point SAWS 2000-12-01 10.380645     0 thermo
R&gt; 10    Muizenberg SAWS 1984-08-01 10.387097     0 thermo</code></pre>
</div>
</div>
<p>If you would rather arrange your data in descending order, as is perhaps more often the case, you simply wrap the column name you are arranging by with the <code>desc()</code> function as shown below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="#cb8-2"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(temp))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>R&gt;             site   src       date     temp depth type
R&gt; 1        Sodwana   DEA 2000-02-01 28.34648    18  UTR
R&gt; 2        Sodwana   DEA 1999-03-01 28.04890    18  UTR
R&gt; 3        Sodwana   DEA 1998-03-01 27.87781    18  UTR
R&gt; 4        Sodwana   DEA 1998-02-01 27.76452    18  UTR
R&gt; 5        Sodwana   DEA 1996-02-01 27.73637    18  UTR
R&gt; 6        Sodwana   DEA 2000-03-01 27.52637    18  UTR
R&gt; 7        Sodwana   DEA 2000-01-01 27.52291    18  UTR
R&gt; 8  Leadsmanshoal EKZNW 2007-02-01 27.48132    10  UTR
R&gt; 9        Sodwana EKZNW 2005-01-01 27.45619    12  UTR
R&gt; 10       Sodwana EKZNW 2007-02-01 27.44054    12  UTR</code></pre>
</div>
</div>
<p>It must also be noted that when arranging data in this way, any rows with <code>NA</code> values will be sent to the bottom of the dataframe. This is not always ideal and so must be kept in mind.</p>
</section><section id="filter-observations-rows-with-filter" class="level1"><h1>Filter observations (rows) with <code>filter()</code>
</h1>
<p>When simply arranging data is not enough, and you need to remove rows of data you do not want, <code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code> is the tool to use. For example, you can select all monthly temperatures recorded at the <code>site</code> Humewood during the <code>year</code> 1990 with the following code chunk:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="#cb10-2"></a>  <span class="fu">filter</span>(site <span class="sc">==</span> <span class="st">"Humewood"</span>, <span class="fu">year</span>(date) <span class="sc">==</span> <span class="dv">1990</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>R&gt;        site  src       date     temp depth   type
R&gt; 1  Humewood SAWS 1990-01-01 21.87097     0 thermo
R&gt; 2  Humewood SAWS 1990-02-01 18.64286     0 thermo
R&gt; 3  Humewood SAWS 1990-03-01 18.61290     0 thermo
R&gt; 4  Humewood SAWS 1990-04-01 17.30000     0 thermo
R&gt; 5  Humewood SAWS 1990-05-01 16.35484     0 thermo
R&gt; 6  Humewood SAWS 1990-06-01 15.93333     0 thermo
R&gt; 7  Humewood SAWS 1990-07-01 15.70968     0 thermo
R&gt; 8  Humewood SAWS 1990-08-01 16.09677     0 thermo
R&gt; 9  Humewood SAWS 1990-09-01 16.41667     0 thermo
R&gt; 10 Humewood SAWS 1990-10-01 17.14194     0 thermo</code></pre>
</div>
</div>
<p>Remember to use the assignment operator (<code>&lt;-</code>, keyboard shortcut <strong>alt -</strong>) if you want to create an object in the environment with the new results.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>humewood_90s <span class="ot">&lt;-</span> SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2"></a>  <span class="fu">filter</span>(site <span class="sc">==</span> <span class="st">"Humewood"</span>, <span class="fu">year</span>(date) <span class="sc">%in%</span> <span class="fu">seq</span>(<span class="dv">1990</span>, <span class="dv">1999</span>, <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>It must be mentioned that <code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code> also automatically removes any rows in the filtering column that contain <code>NA</code> values. Should you want to keep rows that contain missing values, insert the <code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code> function into the line of code in question. To illustrate this let’s filter the temperatures for the Port Nolloth data collected by the DEA that were at or below 11°C OR were missing values. You’ll put each argument on a separate line to help keep things clear. Note how R automatically indents the last line in this chunk to help remind you that they are in fact part of the same argument. Also note how I have put the last bracket at the end of this argument on it’s own line. This is not required, but I like to do so as it is a very common mistake to forget the last bracket.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2"></a>  <span class="fu">filter</span>(site <span class="sc">==</span> <span class="st">"Port Nolloth"</span>, <span class="co"># First give the site to filter</span></span>
<span id="cb13-3"><a href="#cb13-3"></a>         src <span class="sc">==</span> <span class="st">"DEA"</span>, <span class="co"># Then specify the source</span></span>
<span id="cb13-4"><a href="#cb13-4"></a>         temp <span class="sc">&lt;=</span> <span class="dv">11</span> <span class="sc">|</span> <span class="co"># Temperatures at or below 11°C OR</span></span>
<span id="cb13-5"><a href="#cb13-5"></a>           <span class="fu">is.na</span>(temp) <span class="co"># Include missing values</span></span>
<span id="cb13-6"><a href="#cb13-6"></a>         )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="select-variables-columns-withselect" class="level1"><h1>Select variables (columns) with<code>select()</code>
</h1>
<p>When you load a dataset that contains more columns than will be useful or required, it is preferable to shave off the excess. You do this with the <code>select()</code> function. In the following four examples you are going to remove the <code>depth</code> and <code>type</code> columns. There are many ways to do this and none are technically better or faster. So it is up to the user to find a favourite technique.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="co"># Select columns individually by name</span></span>
<span id="cb14-2"><a href="#cb14-2"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb14-3"><a href="#cb14-3"></a>  <span class="fu">select</span>(site, src, date, temp)</span>
<span id="cb14-4"><a href="#cb14-4"></a></span>
<span id="cb14-5"><a href="#cb14-5"></a><span class="co"># Select all columns between site and temp like a sequence</span></span>
<span id="cb14-6"><a href="#cb14-6"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb14-7"><a href="#cb14-7"></a>  <span class="fu">select</span>(site<span class="sc">:</span>temp)</span>
<span id="cb14-8"><a href="#cb14-8"></a></span>
<span id="cb14-9"><a href="#cb14-9"></a><span class="co"># Select all columns except those stated individually</span></span>
<span id="cb14-10"><a href="#cb14-10"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb14-11"><a href="#cb14-11"></a>  <span class="fu">select</span>(<span class="sc">-</span>date, <span class="sc">-</span>depth)</span>
<span id="cb14-12"><a href="#cb14-12"></a></span>
<span id="cb14-13"><a href="#cb14-13"></a><span class="co"># Select all columns except those within a given sequence</span></span>
<span id="cb14-14"><a href="#cb14-14"></a>  <span class="co"># Note that the '-' goes outside of a new set of brackets</span></span>
<span id="cb14-15"><a href="#cb14-15"></a>  <span class="co"># that are wrapped around the sequence of columns to remove</span></span>
<span id="cb14-16"><a href="#cb14-16"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb14-17"><a href="#cb14-17"></a>  <span class="fu">select</span>(<span class="sc">-</span>(date<span class="sc">:</span>depth))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You may also use <code>select()</code> to reorder the columns in a dataframe. In this case the inclusion of the <code>everything()</code> function may be a useful shortcut as illustrated below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="co"># Change up order by specifying individual columns</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="#cb15-3"></a>  <span class="fu">select</span>(temp, src, date, site)</span>
<span id="cb15-4"><a href="#cb15-4"></a></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="co"># Use the everything function to grab all columns </span></span>
<span id="cb15-6"><a href="#cb15-6"></a><span class="co"># not already specified</span></span>
<span id="cb15-7"><a href="#cb15-7"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb15-8"><a href="#cb15-8"></a>  <span class="fu">select</span>(type, src, <span class="fu">everything</span>())</span>
<span id="cb15-9"><a href="#cb15-9"></a></span>
<span id="cb15-10"><a href="#cb15-10"></a><span class="co"># Or go bananas and use all of the rules at once</span></span>
<span id="cb15-11"><a href="#cb15-11"></a>  <span class="co"># Remember, when dealing with tidy data,</span></span>
<span id="cb15-12"><a href="#cb15-12"></a>  <span class="co"># everything may be interchanged</span></span>
<span id="cb15-13"><a href="#cb15-13"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb15-14"><a href="#cb15-14"></a>  <span class="fu">select</span>(temp<span class="sc">:</span>type, <span class="fu">everything</span>(), <span class="sc">-</span>src)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
The square bracket <code>[]</code> notation
</div>
</div>
<div class="callout-body-container callout-body">
<p>The square bracket <code>[]</code> notation may also be used for indexing and subsetting data structures such as vectors, matrices, data frames, and lists. Before <strong>tidyverse</strong> existed, this was the only way to do so. Square brackets allows you to select elements from these data structures based on their positions, conditions, or names. The use of square brackets can vary slightly depending on the data structure being accessed. Here’s a brief overview:</p>
<ol type="1">
<li><p><strong>Vectors</strong>: When used with vectors, square brackets allow you to select elements by their numeric position or a logical vector indicating which elements to select. For example, <code>vector[c(1, 3)]</code> returns the first and third elements of the vector.</p></li>
<li><p><strong>Matrices</strong>: For matrices, square brackets take two dimensions <code>[row, column]</code> to select elements. You can select entire rows, columns, or individual elements. Specifying a row and column as empty (e.g., <code>[,]</code>) selects everything in that dimension.</p></li>
<li><p><strong>Dataframes</strong>: Similar to matrices, square brackets can be used to subset data frames by row and column. However, since dataframes can have column names, you can also use these names for selection, e.g., <code>df[1,]</code> selects the first row of the dataframe, and <code>df[, "columnName"]</code> selects all rows of a specific column.</p></li>
<li><p><strong>Lists</strong>: Lists can be subsetted by numeric or character indices corresponding to their elements. For example, <code>list[[1]]</code> selects the first element of the list. Note the double brackets, which are used to extract elements from a list directly. Single brackets, e.g., <code>list[1]</code>, return a sublist containing the first element.</p></li>
</ol>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Data structures and square brackets
</div>
</div>
<div class="callout-body-container callout-body">
<p>Do this now: provide examples of i) the various data structures available in R, and ii) how to use square brackets to subset each of them. You may use any of the built-in datasets to do so.</p>
</div>
</div>
</section><section id="create-new-variables-columns-with-mutate" class="level1"><h1>Create new variables (columns) with <code>mutate()</code>
</h1>
<p>When you are performing data analysis/statistics in R this is likely because it is necessary to create some new values that did not exist in the raw data. The previous three functions you looked at (<code>arrange()</code>, <code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code>, <code>select()</code>) will prepare you to create new data, but do not do so themselves. This is when you need to use <code>mutate()</code>. You must however be very mindful that <code>mutate()</code> is only useful if we want to create new variables (columns) that are a function of one or more <em>existing</em> columns (well, that’s how it’s mainly used). Any new column you create with <code>mutate()</code> must always have the same number of rows as the dataframe you are working with. In order to create a new column you must first tell R what the name of the column will be, in this case let’s create a column named <code>kelvin</code>. The second step is to then tell R what to put in the new column. As you may have guessed, you are going to convert the <code>temp</code> column which contains degrees Celsius (°K) into Kelvin (°K) by adding 273.15 to every row.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="#cb16-2"></a>  <span class="fu">mutate</span>(<span class="at">kelvin =</span> temp <span class="sc">+</span> <span class="fl">273.15</span>)<span class="er">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>R&gt;            site src       date     temp depth type   kelvin
R&gt; 1  Port Nolloth DEA 1991-02-01 11.47029     5  UTR 284.6203
R&gt; 2  Port Nolloth DEA 1991-03-01 11.99409     5  UTR 285.1441
R&gt; 3  Port Nolloth DEA 1991-04-01 11.95556     5  UTR 285.1056
R&gt; 4  Port Nolloth DEA 1991-05-01 11.86183     5  UTR 285.0118
R&gt; 5  Port Nolloth DEA 1991-06-01 12.20722     5  UTR 285.3572
R&gt; 6  Port Nolloth DEA 1991-07-01 12.53810     5  UTR 285.6881
R&gt; 7  Port Nolloth DEA 1991-08-01 11.25202     5  UTR 284.4020
R&gt; 8  Port Nolloth DEA 1991-09-01 11.29208     5  UTR 284.4421
R&gt; 9  Port Nolloth DEA 1991-10-01 11.37661     5  UTR 284.5266
R&gt; 10 Port Nolloth DEA 1991-11-01 10.98208     5  UTR 284.1321</code></pre>
</div>
</div>
<p>This is a very basic example and <code>mutate()</code> is capable of much more than simple addition. You will get into some more exciting examples during the next session.</p>
</section><section id="summarise-variables-columns-with-summarise" class="level1"><h1>Summarise variables (columns) with <code>summarise()</code>
</h1>
<p>Finally this brings you to the last tool for this section. To create new columns you use <code>mutate()</code>, but to calculate any sort of summary/statistic from a column that will return fewer rows than the dataframe has you will use <code>summarise()</code>. This makes <code>summarise()</code> much more powerful than the other functions in this section, but because it is able to do more, it can also be more unpredictable, making it’s use potentially more challenging. You will almost always end op using this function in our work flows. The following chunk very simply calculates the overall mean temperature for the entire SACTN.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a href="#cb18-2"></a>  <span class="fu">summarise</span>(<span class="at">mean_temp =</span> <span class="fu">mean</span>(temp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R&gt;   mean_temp
R&gt; 1  19.26955</code></pre>
</div>
</div>
<p>Note how the above chunk created a new dataframe. This is done because it cannot add this one result to the previous dataframe due to the mismatch in the number of rows. If you were to create additional columns with other summaries, you may do so within the same <code>summarise()</code> function. These multiple summaries are displayed on individual lines in the following chunk to help keep things clear.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="#cb20-2"></a>  <span class="fu">summarise</span>(<span class="at">mean_temp =</span> <span class="fu">mean</span>(temp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb20-3"><a href="#cb20-3"></a>            <span class="at">sd_temp =</span> <span class="fu">sd</span>(temp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb20-4"><a href="#cb20-4"></a>            <span class="at">min_temp =</span> <span class="fu">min</span>(temp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb20-5"><a href="#cb20-5"></a>            <span class="at">max_temp =</span> <span class="fu">max</span>(temp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb20-6"><a href="#cb20-6"></a>            )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R&gt;   mean_temp  sd_temp min_temp max_temp
R&gt; 1  19.26955 3.682122 9.136322 28.34648</code></pre>
</div>
</div>
<p>Creating summaries of the <em>entire</em> SACTN dataset in this way is not appropriate as you should not be combining time series from such different parts of the coast. In order to calculate summaries within variables you will need to learn how to use <code>group_by()</code>, which in turn will first require you to learn how to chain multiple functions together within a pipe (<code>%&gt;%</code>). That is how you will begin the next session for today. You will finishing with several tips on how to make your data the tidiest that it may be.</p>


<!-- -->

</section><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{smit,_a._j.2021,
  author = {Smit, A. J.,},
  title = {13. {Tidier} {Data}},
  date = {2021-01-01},
  url = {http://tangledbank.netlify.app/BCB744/intro_r/13-tidier.html},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-smit,_a._j.2021" class="csl-entry quarto-appendix-citeas" role="listitem">
Smit, A. J. (2021) 13. Tidier Data. <a href="http://tangledbank.netlify.app/BCB744/intro_r/13-tidier.html">http://tangledbank.netlify.app/BCB744/intro_r/13-tidier.html.
</a>
</div></div></section></div></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("http:\/\/tangledbank\.netlify\.app");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
            // default icon
            link.classList.add("external");
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="../../BCB744/intro_r/12-tidy.html" class="pagination-link" aria-label="12. Tidy Data">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">12. Tidy Data</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../BCB744/intro_r/14-tidiest.html" class="pagination-link" aria-label="14. Tidiest Data">
        <span class="nav-page-text">14. Tidiest Data</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb22" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb22-1"><a href="#cb22-1"></a><span class="co">---</span></span>
<span id="cb22-2"><a href="#cb22-2"></a><span class="an">date:</span><span class="co"> "2021-01-01"</span></span>
<span id="cb22-3"><a href="#cb22-3"></a><span class="an">title:</span><span class="co"> "13. Tidier Data"</span></span>
<span id="cb22-4"><a href="#cb22-4"></a><span class="co">---</span></span>
<span id="cb22-5"><a href="#cb22-5"></a></span>
<span id="cb22-6"><a href="#cb22-6"></a><span class="at">&gt; "*Knowing where things are, and why, is essential to rational decision making.*"</span></span>
<span id="cb22-7"><a href="#cb22-7"></a><span class="at">&gt;</span></span>
<span id="cb22-8"><a href="#cb22-8"></a><span class="at">&gt; --- Jack Dangermond</span></span>
<span id="cb22-9"><a href="#cb22-9"></a>  </span>
<span id="cb22-10"><a href="#cb22-10"></a><span class="at">&gt; "*The mind commands the body and it obeys. The mind orders itself and meets resistance.*"</span></span>
<span id="cb22-11"><a href="#cb22-11"></a><span class="at">&gt;</span></span>
<span id="cb22-12"><a href="#cb22-12"></a><span class="at">&gt; --- Frank Herbert, Dune</span></span>
<span id="cb22-13"><a href="#cb22-13"></a></span>
<span id="cb22-14"><a href="#cb22-14"></a><span class="in">```{r tidier-opts, echo=FALSE}</span></span>
<span id="cb22-15"><a href="#cb22-15"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(</span>
<span id="cb22-16"><a href="#cb22-16"></a>  <span class="at">comment =</span> <span class="st">"R&gt;"</span>, </span>
<span id="cb22-17"><a href="#cb22-17"></a>  <span class="at">warning =</span> <span class="cn">FALSE</span>, </span>
<span id="cb22-18"><a href="#cb22-18"></a>  <span class="at">message =</span> <span class="cn">FALSE</span></span>
<span id="cb22-19"><a href="#cb22-19"></a>)</span>
<span id="cb22-20"><a href="#cb22-20"></a><span class="in">```</span></span>
<span id="cb22-21"><a href="#cb22-21"></a></span>
<span id="cb22-22"><a href="#cb22-22"></a>On Day 1 already you worked through a tidy workflow. You saw how to import data, how to manipulate it, run a quick analysis or two, and create figures. In the previous session you filled in the missing piece of the workflow by also learning how to tidy up your data within R. For the remainder of today you will be revisiting the 'transform' portion of the tidy workflow. In this session you are going to go into more depth on what you learned in Day 1, and in the last session you will learn some new tricks. Over these two sessions you will also become more comfortable with the *pipe* command <span class="in">`%&gt;%`</span>, while practising writing tidy code.</span>
<span id="cb22-23"><a href="#cb22-23"></a></span>
<span id="cb22-24"><a href="#cb22-24"></a>There are five primary data transformation functions that you will focus on here:  </span>
<span id="cb22-25"><a href="#cb22-25"></a></span>
<span id="cb22-26"><a href="#cb22-26"></a><span class="ss">* </span>Arrange observations (rows)  with <span class="in">`arrange()`</span>  </span>
<span id="cb22-27"><a href="#cb22-27"></a><span class="ss">* </span>Filter observations (rows) with <span class="in">`filter()`</span>  </span>
<span id="cb22-28"><a href="#cb22-28"></a><span class="ss">* </span>Select variables (columns) with <span class="in">`select()`</span>  </span>
<span id="cb22-29"><a href="#cb22-29"></a><span class="ss">* </span>Create new variables (columns) with <span class="in">`mutate()`</span>  </span>
<span id="cb22-30"><a href="#cb22-30"></a><span class="ss">* </span>Summarise variables (columns) with <span class="in">`summarise()`</span>  </span>
<span id="cb22-31"><a href="#cb22-31"></a></span>
<span id="cb22-32"><a href="#cb22-32"></a>You will use the full South African Coastal Temperature Network dataset for these exercises. Before you begin, however, you will need to cover two new concepts.</span>
<span id="cb22-33"><a href="#cb22-33"></a></span>
<span id="cb22-34"><a href="#cb22-34"></a><span class="in">```{r tidier-load}</span></span>
<span id="cb22-35"><a href="#cb22-35"></a><span class="co"># Load libraries</span></span>
<span id="cb22-36"><a href="#cb22-36"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb22-37"><a href="#cb22-37"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb22-38"><a href="#cb22-38"></a></span>
<span id="cb22-39"><a href="#cb22-39"></a><span class="co"># Load the data from a .RData file</span></span>
<span id="cb22-40"><a href="#cb22-40"></a><span class="fu">load</span>(<span class="st">"../../data/SACTNmonthly_v4.0.RData"</span>)</span>
<span id="cb22-41"><a href="#cb22-41"></a></span>
<span id="cb22-42"><a href="#cb22-42"></a><span class="co"># Copy the data as a dataframe with a shorter name</span></span>
<span id="cb22-43"><a href="#cb22-43"></a>SACTN <span class="ot">&lt;-</span> SACTNmonthly_v4<span class="fl">.0</span></span>
<span id="cb22-44"><a href="#cb22-44"></a></span>
<span id="cb22-45"><a href="#cb22-45"></a><span class="co"># Remove the original</span></span>
<span id="cb22-46"><a href="#cb22-46"></a><span class="fu">rm</span>(SACTNmonthly_v4<span class="fl">.0</span>)</span>
<span id="cb22-47"><a href="#cb22-47"></a><span class="in">```</span></span>
<span id="cb22-48"><a href="#cb22-48"></a></span>
<span id="cb22-49"><a href="#cb22-49"></a><span class="fu"># Comparison and logical (Boolean) operators</span></span>
<span id="cb22-50"><a href="#cb22-50"></a></span>
<span id="cb22-51"><a href="#cb22-51"></a>The assignment operator (<span class="in">`&lt;-`</span>) is a symbol that we use to assign some bit of code to an object in your environment. Likewise, **comparison operators** are symbols we use to compare different objects. This is how you tell R how to decide to do many different things. You will see these symbols often out in the 'real world' so let's spend a moment now getting to know them better. Most of these should be very familiar to you already:  </span>
<span id="cb22-52"><a href="#cb22-52"></a></span>
<span id="cb22-53"><a href="#cb22-53"></a><span class="ss">* </span><span class="in">`&gt;`</span>: Greater than  </span>
<span id="cb22-54"><a href="#cb22-54"></a><span class="ss">* </span><span class="in">`&gt;=`</span>: Greater than or equal to</span>
<span id="cb22-55"><a href="#cb22-55"></a><span class="ss">* </span><span class="in">`&lt;`</span>: Less than</span>
<span id="cb22-56"><a href="#cb22-56"></a><span class="ss">* </span><span class="in">`&lt;=`</span>: Less than or equal to</span>
<span id="cb22-57"><a href="#cb22-57"></a><span class="ss">* </span><span class="in">`==`</span>: Equal to</span>
<span id="cb22-58"><a href="#cb22-58"></a><span class="ss">* </span><span class="in">`!=`</span> Not equal to</span>
<span id="cb22-59"><a href="#cb22-59"></a></span>
<span id="cb22-60"><a href="#cb22-60"></a>It is important here to note that <span class="in">`==`</span> is for comparisons and <span class="in">`=`</span> is for maths. They are *not* interchangeable, as we may see in the following code chunk. This is one of the more common mistakes one makes when writing code. Luckily the error message this creates should provide us with the clues we need to figure out that we have made this specific mistake.</span>
<span id="cb22-61"><a href="#cb22-61"></a></span>
<span id="cb22-62"><a href="#cb22-62"></a><span class="in">```{r tidier-comp, error=TRUE}</span></span>
<span id="cb22-63"><a href="#cb22-63"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb22-64"><a href="#cb22-64"></a>  <span class="fu">filter</span>(<span class="at">site =</span> <span class="st">"Amanzimtoti"</span>)</span>
<span id="cb22-65"><a href="#cb22-65"></a><span class="in">```</span></span>
<span id="cb22-66"><a href="#cb22-66"></a></span>
<span id="cb22-67"><a href="#cb22-67"></a>The comparison operators are often used together with **Boolean operators**. Boolean operators are used for logical operations and can compare values, resulting in either <span class="in">`TRUE`</span> or <span class="in">`FALSE`</span>. Here they are:</span>
<span id="cb22-68"><a href="#cb22-68"></a></span>
<span id="cb22-69"><a href="#cb22-69"></a><span class="ss">* </span><span class="in">`!`</span>: NOT - Negates a true value to false, and a false value to true.</span>
<span id="cb22-70"><a href="#cb22-70"></a><span class="ss">* </span><span class="in">`&amp;`</span>: AND - Returns <span class="in">`TRUE`</span> if both operands are true, and <span class="in">`FALSE`</span> otherwise.</span>
<span id="cb22-71"><a href="#cb22-71"></a><span class="ss">* </span><span class="in">`|`</span>: OR - Returns <span class="in">`TRUE`</span> if at least one of the operands is true.</span>
<span id="cb22-72"><a href="#cb22-72"></a><span class="ss">* </span><span class="in">`&amp;&amp;`</span>: AND (element-wise for vectors) - Similar to <span class="in">`&amp;`</span>, but it only evaluates the first element of each vector operand.</span>
<span id="cb22-73"><a href="#cb22-73"></a><span class="ss">* </span><span class="in">`||`</span>: OR (element-wise for vectors) - Similar to <span class="in">`|`</span>, but it only evaluates the first element of each vector operand.</span>
<span id="cb22-74"><a href="#cb22-74"></a></span>
<span id="cb22-75"><a href="#cb22-75"></a>The <span class="in">`%in%`</span> operator in R is a special operator used to test if elements of a vector or data object are contained in another vector or data object. It returns a Boolean vector (<span class="in">`TRUE`</span> or <span class="in">`FALSE`</span>) indicating whether each element of the first vector is found in the second vector. This operator is particularly useful for subsetting or filtering data based on matching values. For example, <span class="in">`x %in% y`</span> will check for each element of <span class="in">`x`</span> if there is a match in <span class="in">`y`</span>, and return a logical vector indicating the presence or absence of each <span class="in">`x`</span> element in <span class="in">`y`</span>.</span>
<span id="cb22-76"><a href="#cb22-76"></a></span>
<span id="cb22-77"><a href="#cb22-77"></a>So, comparison operators are used to make direct comparisons between specific things, but logical operators are used more broadly when making logical arguments. Logic is central to most computing so it is worth taking the time to cover these symbols explicitly here. R makes use of the same *Boolean logic* symbols as many other platforms, including Google, so some (or all) of these will likely be familiar.</span>
<span id="cb22-78"><a href="#cb22-78"></a>  </span>
<span id="cb22-79"><a href="#cb22-79"></a>When writing a line of tidy code you tend to use these logical operator to combine two or more arguments that use comparison operators. For example, the following code chunk uses the <span class="in">`filter()`</span> function to find all temperatures recorded at Pollock Beach during December *or* January. Don't worry if the following line of code is difficult to piece out, but make sure you can locate which symbols are comparison operators and which are logical operators. Please note that for purposes of brevity all of the outputs in this section are limited to ten lines, but when you run these code chunks on your own computer they will be much longer.</span>
<span id="cb22-80"><a href="#cb22-80"></a></span>
<span id="cb22-81"><a href="#cb22-81"></a><span class="in">```{r tidier-logic-1, eval=FALSE}</span></span>
<span id="cb22-82"><a href="#cb22-82"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb22-83"><a href="#cb22-83"></a>  <span class="fu">filter</span>(site <span class="sc">==</span> <span class="st">"Pollock Beach"</span>, <span class="fu">month</span>(date) <span class="sc">==</span> <span class="dv">12</span> <span class="sc">|</span> <span class="fu">month</span>(date) <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb22-84"><a href="#cb22-84"></a><span class="in">```</span></span>
<span id="cb22-85"><a href="#cb22-85"></a><span class="in">```{r tidier-logic-1-ghost, echo=FALSE}</span></span>
<span id="cb22-86"><a href="#cb22-86"></a><span class="fu">filter</span>(SACTN, site <span class="sc">==</span> <span class="st">"Pollock Beach"</span>, <span class="fu">month</span>(date) <span class="sc">==</span> <span class="dv">12</span> <span class="sc">|</span> <span class="fu">month</span>(date) <span class="sc">==</span> <span class="dv">1</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,]</span>
<span id="cb22-87"><a href="#cb22-87"></a><span class="in">```</span></span>
<span id="cb22-88"><a href="#cb22-88"></a></span>
<span id="cb22-89"><a href="#cb22-89"></a>You will look at the interplay between comparison and logical operators in more depth in the following session after you have reacquainted yourself with the main transformation functions you need to know.</span>
<span id="cb22-90"><a href="#cb22-90"></a></span>
<span id="cb22-91"><a href="#cb22-91"></a><span class="fu"># Arrange observations (rows)  with `arrange()`</span></span>
<span id="cb22-92"><a href="#cb22-92"></a></span>
<span id="cb22-93"><a href="#cb22-93"></a>First up in our greatest hits reunion tour is the function <span class="in">`arrange()`</span>. This very simply arranges the observations (rows) in a dataframe based on the variables (columns) it is given. If you are concerned with ties in the ordering of our data you provide additional columns to <span class="in">`arrange()`</span>. The importance of the columns for arranging the rows is given in order from left to right.</span>
<span id="cb22-94"><a href="#cb22-94"></a></span>
<span id="cb22-95"><a href="#cb22-95"></a><span class="in">```{r tidier-arrange, eval=FALSE}</span></span>
<span id="cb22-96"><a href="#cb22-96"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb22-97"><a href="#cb22-97"></a>  <span class="fu">arrange</span>(depth, temp)</span>
<span id="cb22-98"><a href="#cb22-98"></a><span class="in">```</span></span>
<span id="cb22-99"><a href="#cb22-99"></a><span class="in">```{r tidier-arrange-ghost, echo=FALSE}</span></span>
<span id="cb22-100"><a href="#cb22-100"></a><span class="fu">arrange</span>(SACTN, depth, temp)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,]</span>
<span id="cb22-101"><a href="#cb22-101"></a><span class="in">```</span></span>
<span id="cb22-102"><a href="#cb22-102"></a></span>
<span id="cb22-103"><a href="#cb22-103"></a>If you would rather arrange your data in descending order, as is perhaps more often the case, you simply wrap the column name you are arranging by with the <span class="in">`desc()`</span> function as shown below.</span>
<span id="cb22-104"><a href="#cb22-104"></a></span>
<span id="cb22-105"><a href="#cb22-105"></a><span class="in">```{r tidier-desc, eval=FALSE}</span></span>
<span id="cb22-106"><a href="#cb22-106"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb22-107"><a href="#cb22-107"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(temp))</span>
<span id="cb22-108"><a href="#cb22-108"></a><span class="in">```</span></span>
<span id="cb22-109"><a href="#cb22-109"></a><span class="in">```{r tidier-desc-ghost, echo=FALSE}</span></span>
<span id="cb22-110"><a href="#cb22-110"></a><span class="fu">arrange</span>(SACTN, <span class="fu">desc</span>(temp))[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,]</span>
<span id="cb22-111"><a href="#cb22-111"></a><span class="in">```</span></span>
<span id="cb22-112"><a href="#cb22-112"></a></span>
<span id="cb22-113"><a href="#cb22-113"></a>It must also be noted that when arranging data in this way, any rows with <span class="in">`NA`</span> values will be sent to the bottom of the dataframe. This is not always ideal and so must be kept in mind.</span>
<span id="cb22-114"><a href="#cb22-114"></a></span>
<span id="cb22-115"><a href="#cb22-115"></a><span class="fu"># Filter observations (rows) with `filter()`</span></span>
<span id="cb22-116"><a href="#cb22-116"></a></span>
<span id="cb22-117"><a href="#cb22-117"></a>When simply arranging data is not enough, and you need to remove rows of data you do not want, <span class="in">`filter()`</span> is the tool to use. For example, you can select all monthly temperatures recorded at the <span class="in">`site`</span> Humewood during the <span class="in">`year`</span> 1990 with the following code chunk:</span>
<span id="cb22-118"><a href="#cb22-118"></a></span>
<span id="cb22-119"><a href="#cb22-119"></a><span class="in">```{r tidier-filter, eval=FALSE}</span></span>
<span id="cb22-120"><a href="#cb22-120"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb22-121"><a href="#cb22-121"></a>  <span class="fu">filter</span>(site <span class="sc">==</span> <span class="st">"Humewood"</span>, <span class="fu">year</span>(date) <span class="sc">==</span> <span class="dv">1990</span>)</span>
<span id="cb22-122"><a href="#cb22-122"></a><span class="in">```</span></span>
<span id="cb22-123"><a href="#cb22-123"></a><span class="in">```{r tidier-filter-ghost, echo=FALSE}</span></span>
<span id="cb22-124"><a href="#cb22-124"></a><span class="fu">filter</span>(SACTN, site <span class="sc">==</span> <span class="st">"Humewood"</span>, <span class="fu">year</span>(date) <span class="sc">==</span> <span class="dv">1990</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,]</span>
<span id="cb22-125"><a href="#cb22-125"></a><span class="in">```</span></span>
<span id="cb22-126"><a href="#cb22-126"></a></span>
<span id="cb22-127"><a href="#cb22-127"></a>Remember to use the assignment operator (<span class="in">`&lt;-`</span>, keyboard shortcut **alt -**) if you want to create an object in the environment with the new results.</span>
<span id="cb22-128"><a href="#cb22-128"></a></span>
<span id="cb22-129"><a href="#cb22-129"></a><span class="in">```{r tidier-filter-assign, eval=FALSE}</span></span>
<span id="cb22-130"><a href="#cb22-130"></a>humewood_90s <span class="ot">&lt;-</span> SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb22-131"><a href="#cb22-131"></a>  <span class="fu">filter</span>(site <span class="sc">==</span> <span class="st">"Humewood"</span>, <span class="fu">year</span>(date) <span class="sc">%in%</span> <span class="fu">seq</span>(<span class="dv">1990</span>, <span class="dv">1999</span>, <span class="dv">1</span>))</span>
<span id="cb22-132"><a href="#cb22-132"></a><span class="in">```</span></span>
<span id="cb22-133"><a href="#cb22-133"></a></span>
<span id="cb22-134"><a href="#cb22-134"></a>It must be mentioned that <span class="in">`filter()`</span> also automatically removes any rows in the filtering column that contain <span class="in">`NA`</span> values. Should you want to keep rows that contain missing values, insert the <span class="in">`is.na()`</span> function into the line of code in question. To illustrate this let's filter the temperatures for the Port Nolloth data collected by the DEA that were at or below 11°C OR were missing values. You'll put each argument on a separate line to help keep things clear. Note how R automatically indents the last line in this chunk to help remind you that they are in fact part of the same argument. Also note how I have put the last bracket at the end of this argument on it's own line. This is not required, but I like to do so as it is a very common mistake to forget the last bracket.</span>
<span id="cb22-135"><a href="#cb22-135"></a></span>
<span id="cb22-136"><a href="#cb22-136"></a><span class="in">```{r tidier-filter-NA, eval=FALSE}</span></span>
<span id="cb22-137"><a href="#cb22-137"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb22-138"><a href="#cb22-138"></a>  <span class="fu">filter</span>(site <span class="sc">==</span> <span class="st">"Port Nolloth"</span>, <span class="co"># First give the site to filter</span></span>
<span id="cb22-139"><a href="#cb22-139"></a>         src <span class="sc">==</span> <span class="st">"DEA"</span>, <span class="co"># Then specify the source</span></span>
<span id="cb22-140"><a href="#cb22-140"></a>         temp <span class="sc">&lt;=</span> <span class="dv">11</span> <span class="sc">|</span> <span class="co"># Temperatures at or below 11°C OR</span></span>
<span id="cb22-141"><a href="#cb22-141"></a>           <span class="fu">is.na</span>(temp) <span class="co"># Include missing values</span></span>
<span id="cb22-142"><a href="#cb22-142"></a>         )</span>
<span id="cb22-143"><a href="#cb22-143"></a><span class="in">```</span></span>
<span id="cb22-144"><a href="#cb22-144"></a></span>
<span id="cb22-145"><a href="#cb22-145"></a><span class="fu"># Select variables (columns) with`select()`</span></span>
<span id="cb22-146"><a href="#cb22-146"></a></span>
<span id="cb22-147"><a href="#cb22-147"></a>When you load a dataset that contains more columns than will be useful or required, it is preferable to shave off the excess. You do this with the <span class="in">`select()`</span> function. In the following four examples you are going to remove the <span class="in">`depth`</span> and <span class="in">`type`</span> columns. There are many ways to do this and none are technically better or faster. So it is up to the user to find a favourite technique.</span>
<span id="cb22-148"><a href="#cb22-148"></a></span>
<span id="cb22-149"><a href="#cb22-149"></a><span class="in">```{r tidier-sect-1, eval=FALSE}</span></span>
<span id="cb22-150"><a href="#cb22-150"></a><span class="co"># Select columns individually by name</span></span>
<span id="cb22-151"><a href="#cb22-151"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb22-152"><a href="#cb22-152"></a>  <span class="fu">select</span>(site, src, date, temp)</span>
<span id="cb22-153"><a href="#cb22-153"></a></span>
<span id="cb22-154"><a href="#cb22-154"></a><span class="co"># Select all columns between site and temp like a sequence</span></span>
<span id="cb22-155"><a href="#cb22-155"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb22-156"><a href="#cb22-156"></a>  <span class="fu">select</span>(site<span class="sc">:</span>temp)</span>
<span id="cb22-157"><a href="#cb22-157"></a></span>
<span id="cb22-158"><a href="#cb22-158"></a><span class="co"># Select all columns except those stated individually</span></span>
<span id="cb22-159"><a href="#cb22-159"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb22-160"><a href="#cb22-160"></a>  <span class="fu">select</span>(<span class="sc">-</span>date, <span class="sc">-</span>depth)</span>
<span id="cb22-161"><a href="#cb22-161"></a></span>
<span id="cb22-162"><a href="#cb22-162"></a><span class="co"># Select all columns except those within a given sequence</span></span>
<span id="cb22-163"><a href="#cb22-163"></a>  <span class="co"># Note that the '-' goes outside of a new set of brackets</span></span>
<span id="cb22-164"><a href="#cb22-164"></a>  <span class="co"># that are wrapped around the sequence of columns to remove</span></span>
<span id="cb22-165"><a href="#cb22-165"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb22-166"><a href="#cb22-166"></a>  <span class="fu">select</span>(<span class="sc">-</span>(date<span class="sc">:</span>depth))</span>
<span id="cb22-167"><a href="#cb22-167"></a><span class="in">```</span></span>
<span id="cb22-168"><a href="#cb22-168"></a></span>
<span id="cb22-169"><a href="#cb22-169"></a>You may also use <span class="in">`select()`</span> to reorder the columns in a dataframe. In this case the inclusion of the <span class="in">`everything()`</span> function may be a useful shortcut as illustrated below.</span>
<span id="cb22-170"><a href="#cb22-170"></a></span>
<span id="cb22-171"><a href="#cb22-171"></a><span class="in">```{r tidier-select-2, eval=FALSE}</span></span>
<span id="cb22-172"><a href="#cb22-172"></a><span class="co"># Change up order by specifying individual columns</span></span>
<span id="cb22-173"><a href="#cb22-173"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb22-174"><a href="#cb22-174"></a>  <span class="fu">select</span>(temp, src, date, site)</span>
<span id="cb22-175"><a href="#cb22-175"></a></span>
<span id="cb22-176"><a href="#cb22-176"></a><span class="co"># Use the everything function to grab all columns </span></span>
<span id="cb22-177"><a href="#cb22-177"></a><span class="co"># not already specified</span></span>
<span id="cb22-178"><a href="#cb22-178"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb22-179"><a href="#cb22-179"></a>  <span class="fu">select</span>(type, src, <span class="fu">everything</span>())</span>
<span id="cb22-180"><a href="#cb22-180"></a></span>
<span id="cb22-181"><a href="#cb22-181"></a><span class="co"># Or go bananas and use all of the rules at once</span></span>
<span id="cb22-182"><a href="#cb22-182"></a>  <span class="co"># Remember, when dealing with tidy data,</span></span>
<span id="cb22-183"><a href="#cb22-183"></a>  <span class="co"># everything may be interchanged</span></span>
<span id="cb22-184"><a href="#cb22-184"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb22-185"><a href="#cb22-185"></a>  <span class="fu">select</span>(temp<span class="sc">:</span>type, <span class="fu">everything</span>(), <span class="sc">-</span>src)</span>
<span id="cb22-186"><a href="#cb22-186"></a><span class="in">```</span></span>
<span id="cb22-187"><a href="#cb22-187"></a></span>
<span id="cb22-188"><a href="#cb22-188"></a>::: {.callout-note appearance="simple"}</span>
<span id="cb22-189"><a href="#cb22-189"></a><span class="fu">## The square bracket `[]` notation</span></span>
<span id="cb22-190"><a href="#cb22-190"></a></span>
<span id="cb22-191"><a href="#cb22-191"></a>The square bracket <span class="in">`[]`</span> notation may also be used for indexing and subsetting data structures such as vectors, matrices, data frames, and lists. Before **tidyverse** existed, this was the only way to do so. Square brackets allows you to select elements from these data structures based on their positions, conditions, or names. The use of square brackets can vary slightly depending on the data structure being accessed. Here's a brief overview:</span>
<span id="cb22-192"><a href="#cb22-192"></a></span>
<span id="cb22-193"><a href="#cb22-193"></a><span class="ss">1. </span>**Vectors**: When used with vectors, square brackets allow you to select elements by their numeric position or a logical vector indicating which elements to select. For example, <span class="in">`vector[c(1, 3)]`</span> returns the first and third elements of the vector.</span>
<span id="cb22-194"><a href="#cb22-194"></a></span>
<span id="cb22-195"><a href="#cb22-195"></a><span class="ss">2. </span>**Matrices**: For matrices, square brackets take two dimensions <span class="in">`[row, column]`</span> to select elements. You can select entire rows, columns, or individual elements. Specifying a row and column as empty (e.g., <span class="in">`[,]`</span>) selects everything in that dimension.</span>
<span id="cb22-196"><a href="#cb22-196"></a></span>
<span id="cb22-197"><a href="#cb22-197"></a><span class="ss">3. </span>**Dataframes**: Similar to matrices, square brackets can be used to subset data frames by row and column. However, since dataframes can have column names, you can also use these names for selection, e.g., <span class="in">`df[1,]`</span> selects the first row of the dataframe, and <span class="in">`df[, "columnName"]`</span> selects all rows of a specific column.</span>
<span id="cb22-198"><a href="#cb22-198"></a></span>
<span id="cb22-199"><a href="#cb22-199"></a><span class="ss">4. </span>**Lists**: Lists can be subsetted by numeric or character indices corresponding to their elements. For example, <span class="in">`list[[1]]`</span> selects the first element of the list. Note the double brackets, which are used to extract elements from a list directly. Single brackets, e.g., <span class="in">`list[1]`</span>, return a sublist containing the first element.</span>
<span id="cb22-200"><a href="#cb22-200"></a>:::</span>
<span id="cb22-201"><a href="#cb22-201"></a></span>
<span id="cb22-202"><a href="#cb22-202"></a>::: {.callout-important}</span>
<span id="cb22-203"><a href="#cb22-203"></a><span class="fu">## Data structures and square brackets</span></span>
<span id="cb22-204"><a href="#cb22-204"></a></span>
<span id="cb22-205"><a href="#cb22-205"></a>Do this now: provide examples of i) the various data structures available in R, and ii) how to use square brackets to subset each of them. You may use any of the built-in datasets to do so.</span>
<span id="cb22-206"><a href="#cb22-206"></a>:::</span>
<span id="cb22-207"><a href="#cb22-207"></a></span>
<span id="cb22-208"><a href="#cb22-208"></a></span>
<span id="cb22-209"><a href="#cb22-209"></a><span class="fu"># Create new variables (columns) with `mutate()`</span></span>
<span id="cb22-210"><a href="#cb22-210"></a></span>
<span id="cb22-211"><a href="#cb22-211"></a>When you are performing data analysis/statistics in R this is likely because it is necessary to create some new values that did not exist in the raw data. The previous three functions you looked at (<span class="in">`arrange()`</span>, <span class="in">`filter()`</span>, <span class="in">`select()`</span>) will prepare you to create new data, but do not do so themselves. This is when you need to use <span class="in">`mutate()`</span>. You must however be very mindful that <span class="in">`mutate()`</span> is only useful if we want to create new variables (columns) that are a function of one or more *existing* columns (well, that's how it's mainly used). Any new column you create with <span class="in">`mutate()`</span> must always have the same number of rows as the dataframe you are working with. In order to create a new column you must first tell R what the name of the column will be, in this case let's create a column named <span class="in">`kelvin`</span>. The second step is to then tell R what to put in the new column. As you may have guessed, you are going to convert the <span class="in">`temp`</span> column which contains degrees Celsius (°K) into Kelvin (°K) by adding 273.15 to every row.</span>
<span id="cb22-212"><a href="#cb22-212"></a></span>
<span id="cb22-213"><a href="#cb22-213"></a><span class="in">```{r tidier-mutate-1, eval=FALSE}</span></span>
<span id="cb22-214"><a href="#cb22-214"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb22-215"><a href="#cb22-215"></a>  <span class="fu">mutate</span>(<span class="at">kelvin =</span> temp <span class="sc">+</span> <span class="fl">273.15</span>)<span class="er">)</span></span>
<span id="cb22-216"><a href="#cb22-216"></a><span class="in">```</span></span>
<span id="cb22-217"><a href="#cb22-217"></a><span class="in">```{r tidier-mutate-1-ghost, echo=FALSE}</span></span>
<span id="cb22-218"><a href="#cb22-218"></a><span class="fu">mutate</span>(SACTN, <span class="at">kelvin =</span> temp <span class="sc">+</span> <span class="fl">273.15</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,]</span>
<span id="cb22-219"><a href="#cb22-219"></a><span class="in">```</span></span>
<span id="cb22-220"><a href="#cb22-220"></a></span>
<span id="cb22-221"><a href="#cb22-221"></a>This is a very basic example and <span class="in">`mutate()`</span> is capable of much more than simple addition. You will get into some more exciting examples during the next session.</span>
<span id="cb22-222"><a href="#cb22-222"></a></span>
<span id="cb22-223"><a href="#cb22-223"></a><span class="fu"># Summarise variables (columns) with `summarise()`</span></span>
<span id="cb22-224"><a href="#cb22-224"></a></span>
<span id="cb22-225"><a href="#cb22-225"></a>Finally this brings you to the last tool for this section. To create new columns you use <span class="in">`mutate()`</span>, but to calculate any sort of summary/statistic from a column that will return fewer rows than the dataframe has you will use <span class="in">`summarise()`</span>. This makes <span class="in">`summarise()`</span> much more powerful than the other functions in this section, but because it is able to do more, it can also be more unpredictable, making it's use potentially more challenging. You will almost always end op using this function in our work flows. The following chunk very simply calculates the overall mean temperature for the entire SACTN.</span>
<span id="cb22-226"><a href="#cb22-226"></a></span>
<span id="cb22-227"><a href="#cb22-227"></a><span class="in">```{r tidier-summarise-1}</span></span>
<span id="cb22-228"><a href="#cb22-228"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb22-229"><a href="#cb22-229"></a>  <span class="fu">summarise</span>(<span class="at">mean_temp =</span> <span class="fu">mean</span>(temp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb22-230"><a href="#cb22-230"></a><span class="in">```</span></span>
<span id="cb22-231"><a href="#cb22-231"></a></span>
<span id="cb22-232"><a href="#cb22-232"></a>Note how the above chunk created a new dataframe. This is done because it cannot add this one result to the previous dataframe due to the mismatch in the number of rows. If you were to create additional columns with other summaries, you may do so within the same <span class="in">`summarise()`</span> function. These multiple summaries are displayed on individual lines in the following chunk to help keep things clear.</span>
<span id="cb22-233"><a href="#cb22-233"></a></span>
<span id="cb22-234"><a href="#cb22-234"></a><span class="in">```{r tidier-summarise-2}</span></span>
<span id="cb22-235"><a href="#cb22-235"></a>SACTN <span class="sc">%&gt;%</span> </span>
<span id="cb22-236"><a href="#cb22-236"></a>  <span class="fu">summarise</span>(<span class="at">mean_temp =</span> <span class="fu">mean</span>(temp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb22-237"><a href="#cb22-237"></a>            <span class="at">sd_temp =</span> <span class="fu">sd</span>(temp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb22-238"><a href="#cb22-238"></a>            <span class="at">min_temp =</span> <span class="fu">min</span>(temp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb22-239"><a href="#cb22-239"></a>            <span class="at">max_temp =</span> <span class="fu">max</span>(temp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb22-240"><a href="#cb22-240"></a>            )</span>
<span id="cb22-241"><a href="#cb22-241"></a><span class="in">```</span></span>
<span id="cb22-242"><a href="#cb22-242"></a></span>
<span id="cb22-243"><a href="#cb22-243"></a>Creating summaries of the *entire* SACTN dataset in this way is not appropriate as you should not be combining time series from such different parts of the coast. In order to calculate summaries within variables you will need to learn how to use <span class="in">`group_by()`</span>, which in turn will first require you to learn how to chain multiple functions together within a pipe (<span class="in">`%&gt;%`</span>). That is how you will begin the next session for today. You will finishing with several tips on how to make your data the tidiest that it may be.</span></code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>© 2025, AJ Smit</p>
</div>   
    <div class="nav-footer-center">

<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/ajsmit/tangled_bank/edit/main/BCB744/intro_r/13-tidier.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/ajsmit/tangled_bank/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div><div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>


<script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>
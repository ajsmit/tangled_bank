<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.21">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="AJ Smit">

<title>PBSPro users and nodes – The Tangled Bank</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/favicon.ico" rel="icon">
<script src="../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-f9d2e688c83043042fa051765c26f29b.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-b5324c11422050a6ca6038ce3f1a2d11.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-SCYH68M489"></script>

<script type="text/plain" cookie-consent="tracking">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-SCYH68M489', { 'anonymize_ip': true});
</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"headline",
  "consent_type":"express",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"en"
  });
});
</script> 
  
<style>html{ scroll-behavior: smooth; }</style>
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>


<link rel="stylesheet" href="../styles.css">
<meta property="og:title" content="PBSPro users and nodes – The Tangled Bank">
<meta property="og:description" content="UWC’s Biodiversity &amp; Conservation Biology Department Pages For BDC334, BCB743, and BCB744.">
<meta property="og:site_name" content="The Tangled Bank">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">The Tangled Bank</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-vignettes" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Vignettes</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-vignettes">    
        <li>
    <a class="dropdown-item" href="../vignettes/netCDF_dates.html">
 <span class="dropdown-text">Dates From netCDF Files: Two Approaches</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../vignettes/prep_NOAA_OISST.html">
 <span class="dropdown-text">Downloading and Prep: ERDDAP</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../vignettes/chl_ERDDAP.html">
 <span class="dropdown-text">Retrieving Chlorophyll-a Data from ERDDAP Servers</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../vignettes/alt_method.html">
 <span class="dropdown-text">Downloading and Prep: Python + CDO</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../vignettes/gridded_data.html">
 <span class="dropdown-text">Detecting Events in Gridded Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../vignettes/regridding.html">
 <span class="dropdown-text">Regridding gridded data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../vignettes/MHW_MCS_horizonplots.html">
 <span class="dropdown-text">Displaying MHWs and MCSs as Horizon Plots</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../vignettes/heatwaveR_issues.html">
 <span class="dropdown-text">heatwaveR Issues</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../vignettes/chl_sightings.html">
 <span class="dropdown-text">Plotting the Whale Sightings and Chlorophyll-<em>a</em> Concentrations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../vignettes/chl_localisation.html">
 <span class="dropdown-text">Spatial Localisation, Subsetting, and Aggregation of the Chlorophyll-<em>a</em> Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../vignettes/elem_ts_methods.html">
 <span class="dropdown-text">Wavelet Analysis of Diatom Time Series</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../vignettes/buffer_data_extract.html">
 <span class="dropdown-text">Extracting gridded data within a buffer</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-high-performace-computing" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">High-Performace Computing</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-high-performace-computing">    
        <li>
    <a class="dropdown-item" href="../vignettes/README_Lengau.html">
 <span class="dropdown-text">Using Lengau</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../vignettes/PBSPro_users.html">
 <span class="dropdown-text">PBSPro user and job management</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../vignettes/README_tmux.html">
 <span class="dropdown-text">Using tmux</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../blog.html"> 
<span class="menu-text">Tangled Bank Blog</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-blogroll" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Blogroll</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-blogroll">    
        <li>
    <a class="dropdown-item" href="https://www.r-bloggers.com">
 <span class="dropdown-text">R-bloggers</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item compact">
    <a class="nav-link" href="../blog.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-bi-github" role="link" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-bi-github">    
        <li>
    <a class="dropdown-item" href="https://github.com/ajsmit/tangled_bank">
 <span class="dropdown-text">Source Code</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://bugs.com">
 <span class="dropdown-text">Report a Bug</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#which-nodes-are-associated-with-a-user" id="toc-which-nodes-are-associated-with-a-user" class="nav-link active" data-scroll-target="#which-nodes-are-associated-with-a-user">Which nodes are associated with a user?</a></li>
  <li><a href="#how-to-delete-or-terminate-a-users-specific-job" id="toc-how-to-delete-or-terminate-a-users-specific-job" class="nav-link" data-scroll-target="#how-to-delete-or-terminate-a-users-specific-job">How to delete or terminate a user’s specific job</a></li>
  <li><a href="#how-to-terminate-a-multi-node-compute-job" id="toc-how-to-terminate-a-multi-node-compute-job" class="nav-link" data-scroll-target="#how-to-terminate-a-multi-node-compute-job">How to terminate a multi-node compute job</a></li>
  <li><a href="#how-many-jobs-are-ahead-of-mine" id="toc-how-many-jobs-are-ahead-of-mine" class="nav-link" data-scroll-target="#how-many-jobs-are-ahead-of-mine">How many jobs are ahead of mine?</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/ajsmit/tangled_bank/edit/main/vignettes/PBSPro_users.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/ajsmit/tangled_bank/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">PBSPro users and nodes</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>AJ Smit </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="which-nodes-are-associated-with-a-user" class="level2">
<h2 class="anchored" data-anchor-id="which-nodes-are-associated-with-a-user">Which nodes are associated with a user?</h2>
<p>To find active nodes associated with a user in PBSPro, you’d typically use the <code>qstat</code> command followed by some parsing to extract the node information. The method to extract node information can vary based on your setup and specific requirements.</p>
<p>Here’s a general approach:</p>
<ol type="1">
<li><strong>Fetch Jobs Associated with a User</strong>:</li>
</ol>
<p>Use <code>qstat</code> to get a list of jobs associated with a user:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1"></a><span class="ex">qstat</span> <span class="at">-u</span> <span class="op">&lt;</span>username<span class="op">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This will give you a list of jobs associated with the user <code>&lt;username&gt;</code>.</p>
<ol start="2" type="1">
<li><strong>Parse Job IDs</strong>:</li>
</ol>
<p>From the output, you’d want to extract the Job IDs of interest (typically, the running ones).</p>
<ol start="3" type="1">
<li><strong>Get Detailed Information for Each Job</strong>:</li>
</ol>
<p>For each of those Job IDs, you’d then get more detailed information:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1"></a><span class="ex">qstat</span> <span class="at">-f</span> <span class="op">&lt;</span>JobID<span class="op">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This will provide a lot of information, including the nodes the job is running on.</p>
<ol start="4" type="1">
<li><strong>Extract Node Information</strong>:</li>
</ol>
<p>From the detailed output, you’d look for an entry that specifies nodes. This might look something like:</p>
<pre><code>exec_host = node_name/0+node_name/1+...</code></pre>
<p>You’d then parse this to get the list of nodes.</p>
<ol start="5" type="1">
<li><strong>Script It</strong>:</li>
</ol>
<p>You can wrap this up in a script for convenience. Here’s a simple Bash script that automates the above steps:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb4-2"><a href="#cb4-2"></a></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="va">USERNAME</span><span class="op">=</span><span class="va">$1</span></span>
<span id="cb4-4"><a href="#cb4-4"></a></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="co"># Fetch jobs for user</span></span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="va">JOBS</span><span class="op">=</span><span class="va">$(</span><span class="ex">qstat</span> <span class="at">-u</span> <span class="va">$USERNAME</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">'NR&gt;5 {print $1}'</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="st">'^[0-9]'</span><span class="va">)</span></span>
<span id="cb4-7"><a href="#cb4-7"></a></span>
<span id="cb4-8"><a href="#cb4-8"></a><span class="cf">for</span> JOB <span class="kw">in</span> <span class="va">$JOBS</span><span class="kw">;</span> <span class="cf">do</span></span>
<span id="cb4-9"><a href="#cb4-9"></a>    <span class="co"># Fetch node information for each job</span></span>
<span id="cb4-10"><a href="#cb4-10"></a>    <span class="va">NODES</span><span class="op">=</span><span class="va">$(</span><span class="ex">qstat</span> <span class="at">-f</span> <span class="va">$JOB</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="st">'exec_host'</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="at">-F</span><span class="st">' = '</span> <span class="st">'{print $2}'</span><span class="va">)</span></span>
<span id="cb4-11"><a href="#cb4-11"></a>    <span class="bu">echo</span> <span class="st">"Job: </span><span class="va">$JOB</span><span class="st"> runs on nodes: </span><span class="va">$NODES</span><span class="st">"</span></span>
<span id="cb4-12"><a href="#cb4-12"></a><span class="cf">done</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>You can save this script, make it executable using <code>chmod guo=rwx</code> (on Arch Linux on Lengau) <code>chmod +x script_name.sh</code> (on other Linux distributions), and then run it:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1"></a><span class="ex">./script_name.sh</span> <span class="op">&lt;</span>username<span class="op">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Note</strong>: The specifics, especially the parsing bits, can vary based on one’s exact PBSPro setup and version. Adjust the script accordingly. Always refer to the official PBSPro documentation or local documentation provided by your HPC center for precise details.</p>
</section>
<section id="how-to-delete-or-terminate-a-users-specific-job" class="level2">
<h2 class="anchored" data-anchor-id="how-to-delete-or-terminate-a-users-specific-job">How to delete or terminate a user’s specific job</h2>
<ol type="1">
<li><strong>Find the user’s running jobs</strong>:</li>
</ol>
<p>Use the <code>qstat</code> command to fetch the list of jobs associated with a user:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1"></a><span class="ex">qstat</span> <span class="at">-u</span> <span class="op">&lt;</span>username<span class="op">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ol start="2" type="1">
<li><strong>Extract the Job IDs and delete them</strong>:</li>
</ol>
<p>You can use the <code>qdel</code> command to delete specific jobs.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1"></a><span class="ex">qdel</span> <span class="at">-W</span> force <span class="op">&lt;</span>job.name<span class="op">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="how-to-terminate-a-multi-node-compute-job" class="level2">
<h2 class="anchored" data-anchor-id="how-to-terminate-a-multi-node-compute-job">How to terminate a multi-node compute job</h2>
<p>Terminating a multi-node compute cluster in a PBSPro environment typically involves deleting or cancelling the job that has been submitted:</p>
<ol type="1">
<li><p><strong>Using Job ID</strong>:</p>
<ul>
<li>First, identify the Job ID of the running job. You can use the <code>qstat</code> command to list all the jobs you have submitted:</li>
</ul></li>
</ol>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1"></a><span class="ex">qstat</span> <span class="at">-u</span> <span class="op">&lt;</span>your_username<span class="op">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>Once you have identified the Job ID of the job you wish to terminate, you can use the <code>qdel</code> command to delete it:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1"></a><span class="ex">qdel</span> <span class="op">&lt;</span>Job_ID<span class="op">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This will terminate the job and free up the resources that were being used across the multiple nodes.</p>
<ol start="2" type="1">
<li><p><strong>Using Job Name</strong>:</p>
<ul>
<li>If you know the name of the job, you can also use it to delete the job:</li>
</ul></li>
</ol>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1"></a><span class="ex">qdel</span> <span class="at">-N</span> <span class="op">&lt;</span>Job_Name<span class="op">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ol start="3" type="1">
<li><p><strong>Deleting All User Jobs</strong>:</p>
<ul>
<li>If you want to delete all the jobs you have submitted, you can use the following command:</li>
</ul></li>
</ol>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1"></a><span class="ex">qdel</span> <span class="kw">`</span><span class="ex">qselect</span> <span class="at">-u</span> <span class="op">&lt;</span>your_username<span class="op">&gt;</span><span class="kw">`</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ol start="4" type="1">
<li><p><strong>Interactive Mode</strong>:</p>
<ul>
<li>If you are in an interactive session, you can simply type <code>exit</code> or press <code>CTRL+D</code> to terminate the session, and the job will be terminated.</li>
</ul></li>
</ol>
<p>The above assumes you have the necessary permissions to delete the job. You should ensure that there is no unsaved work as terminating the job will discard all the unsaved progress. Always be cautious and double-check the Job ID or Job Name to avoid terminating the wrong job. Different clusters might have slightly different configurations, so it might be best to consult the specific documentation of your environment or get in touch with the system administrator for detailed guidance.</p>
</section>
<section id="how-many-jobs-are-ahead-of-mine" class="level2">
<h2 class="anchored" data-anchor-id="how-many-jobs-are-ahead-of-mine">How many jobs are ahead of mine?</h2>
<p>To find out where in the queue your job is located, you can use the <code>qstat</code> command with various options to filter and view the status of the jobs:</p>
<ol type="1">
<li><strong>List all jobs in the queue:</strong></li>
</ol>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1"></a><span class="ex">qstat</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This will display all jobs in the queue, showing their IDs, names, usernames, time used, and their statuses (e.g., Running, Queued, etc.).</p>
<ol start="2" type="1">
<li><strong>Find a specific job in the queue:</strong></li>
</ol>
<p>Once you knows the Job ID of one’s submitted job, you can use this command to display information specifically for that job:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1"></a><span class="ex">qstat</span> <span class="op">&lt;</span>job_id<span class="op">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Replace <code>&lt;job_id&gt;</code> with your job ID.</p>
<ol start="3" type="1">
<li><strong>Find the position of a specific job in the queue:</strong></li>
</ol>
<p>You can use the <code>qstat</code> command with some Unix commands to find out the position of your job:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1"></a><span class="ex">qstat</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-B</span> 10 <span class="st">"&lt;job_id&gt;"</span> <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 10</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This command will show you the 10 jobs before your own job in the queue, giving an idea of your job’s position relative to others.</p>
<ol start="4" type="1">
<li><strong>Customise the display to make the position more apparent:</strong></li>
</ol>
<p>You can customise the <code>qstat</code> output using various options to display specific columns or order the jobs in a particular manner to make it easier to locate your job and infer its position.</p>
<p>For example, to display jobs in the order they are queued:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1"></a><span class="ex">qstat</span> <span class="at">-a</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>The <code>-a</code> option displays more details, and you can then manually locate your job to determine its position in the queue.</p>
<p>The position in the queue might not always accurately represent when your job will start executing because the actual scheduling and execution of jobs depend on various factors, such as job priorities, requested resources, and the scheduler’s configuration and policies.</p>


<!-- -->

</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{smit,_a._j.,
  author = {Smit, A. J., and Smit, AJ},
  title = {PBSPro Users and Nodes},
  url = {http://tangledbank.netlify.app/vignettes/PBSPro_users.html},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-smit,_a._j." class="csl-entry quarto-appendix-citeas" role="listitem">
Smit, A. J., Smit A PBSPro users and nodes. <a href="http://tangledbank.netlify.app/vignettes/PBSPro_users.html">http://tangledbank.netlify.app/vignettes/PBSPro_users.html.
</a>
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("http:\/\/tangledbank\.netlify\.app");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
            // default icon
            link.classList.add("external");
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb16-1"><a href="#cb16-1"></a><span class="co">---</span></span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="an">title:</span><span class="co"> "PBSPro users and nodes"</span></span>
<span id="cb16-3"><a href="#cb16-3"></a><span class="an">author:</span><span class="co"> "AJ Smit"</span></span>
<span id="cb16-4"><a href="#cb16-4"></a><span class="co">---</span></span>
<span id="cb16-5"><a href="#cb16-5"></a></span>
<span id="cb16-6"><a href="#cb16-6"></a><span class="fu">## Which nodes are associated with a user?</span></span>
<span id="cb16-7"><a href="#cb16-7"></a></span>
<span id="cb16-8"><a href="#cb16-8"></a>To find active nodes associated with a user in PBSPro, you'd typically use the <span class="in">`qstat`</span> command followed by some parsing to extract the node information. The method to extract node information can vary based on your setup and specific requirements.</span>
<span id="cb16-9"><a href="#cb16-9"></a></span>
<span id="cb16-10"><a href="#cb16-10"></a>Here's a general approach:</span>
<span id="cb16-11"><a href="#cb16-11"></a></span>
<span id="cb16-12"><a href="#cb16-12"></a><span class="ss">1. </span>**Fetch Jobs Associated with a User**:</span>
<span id="cb16-13"><a href="#cb16-13"></a></span>
<span id="cb16-14"><a href="#cb16-14"></a>Use <span class="in">`qstat`</span> to get a list of jobs associated with a user:</span>
<span id="cb16-15"><a href="#cb16-15"></a></span>
<span id="cb16-16"><a href="#cb16-16"></a><span class="in">```bash</span></span>
<span id="cb16-17"><a href="#cb16-17"></a><span class="ex">qstat</span> <span class="at">-u</span> <span class="op">&lt;</span>username<span class="op">&gt;</span></span>
<span id="cb16-18"><a href="#cb16-18"></a><span class="in">```</span></span>
<span id="cb16-19"><a href="#cb16-19"></a></span>
<span id="cb16-20"><a href="#cb16-20"></a>This will give you a list of jobs associated with the user <span class="in">`&lt;username&gt;`</span>.</span>
<span id="cb16-21"><a href="#cb16-21"></a></span>
<span id="cb16-22"><a href="#cb16-22"></a><span class="ss">2. </span>**Parse Job IDs**:</span>
<span id="cb16-23"><a href="#cb16-23"></a></span>
<span id="cb16-24"><a href="#cb16-24"></a>From the output, you'd want to extract the Job IDs of interest (typically, the running ones).</span>
<span id="cb16-25"><a href="#cb16-25"></a></span>
<span id="cb16-26"><a href="#cb16-26"></a><span class="ss">3. </span>**Get Detailed Information for Each Job**:</span>
<span id="cb16-27"><a href="#cb16-27"></a></span>
<span id="cb16-28"><a href="#cb16-28"></a>For each of those Job IDs, you'd then get more detailed information:</span>
<span id="cb16-29"><a href="#cb16-29"></a></span>
<span id="cb16-30"><a href="#cb16-30"></a><span class="in">```bash</span></span>
<span id="cb16-31"><a href="#cb16-31"></a><span class="ex">qstat</span> <span class="at">-f</span> <span class="op">&lt;</span>JobID<span class="op">&gt;</span></span>
<span id="cb16-32"><a href="#cb16-32"></a><span class="in">```</span></span>
<span id="cb16-33"><a href="#cb16-33"></a></span>
<span id="cb16-34"><a href="#cb16-34"></a>This will provide a lot of information, including the nodes the job is running on.</span>
<span id="cb16-35"><a href="#cb16-35"></a></span>
<span id="cb16-36"><a href="#cb16-36"></a><span class="ss">4. </span>**Extract Node Information**:</span>
<span id="cb16-37"><a href="#cb16-37"></a></span>
<span id="cb16-38"><a href="#cb16-38"></a>From the detailed output, you'd look for an entry that specifies nodes. This might look something like:</span>
<span id="cb16-39"><a href="#cb16-39"></a></span>
<span id="cb16-40"><a href="#cb16-40"></a><span class="in">```</span></span>
<span id="cb16-41"><a href="#cb16-41"></a><span class="in">exec_host = node_name/0+node_name/1+...</span></span>
<span id="cb16-42"><a href="#cb16-42"></a><span class="in">```</span></span>
<span id="cb16-43"><a href="#cb16-43"></a></span>
<span id="cb16-44"><a href="#cb16-44"></a>You'd then parse this to get the list of nodes.</span>
<span id="cb16-45"><a href="#cb16-45"></a></span>
<span id="cb16-46"><a href="#cb16-46"></a><span class="ss">5. </span>**Script It**:</span>
<span id="cb16-47"><a href="#cb16-47"></a></span>
<span id="cb16-48"><a href="#cb16-48"></a>You can wrap this up in a script for convenience. Here's a simple Bash script that automates the above steps:</span>
<span id="cb16-49"><a href="#cb16-49"></a></span>
<span id="cb16-50"><a href="#cb16-50"></a><span class="in">```bash</span></span>
<span id="cb16-51"><a href="#cb16-51"></a><span class="co">#!/bin/bash</span></span>
<span id="cb16-52"><a href="#cb16-52"></a></span>
<span id="cb16-53"><a href="#cb16-53"></a><span class="va">USERNAME</span><span class="op">=</span><span class="va">$1</span></span>
<span id="cb16-54"><a href="#cb16-54"></a></span>
<span id="cb16-55"><a href="#cb16-55"></a><span class="co"># Fetch jobs for user</span></span>
<span id="cb16-56"><a href="#cb16-56"></a><span class="va">JOBS</span><span class="op">=</span><span class="va">$(</span><span class="ex">qstat</span> <span class="at">-u</span> <span class="va">$USERNAME</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">'NR&gt;5 {print $1}'</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="st">'^[0-9]'</span><span class="va">)</span></span>
<span id="cb16-57"><a href="#cb16-57"></a></span>
<span id="cb16-58"><a href="#cb16-58"></a><span class="cf">for</span> JOB <span class="kw">in</span> <span class="va">$JOBS</span><span class="kw">;</span> <span class="cf">do</span></span>
<span id="cb16-59"><a href="#cb16-59"></a>    <span class="co"># Fetch node information for each job</span></span>
<span id="cb16-60"><a href="#cb16-60"></a>    <span class="va">NODES</span><span class="op">=</span><span class="va">$(</span><span class="ex">qstat</span> <span class="at">-f</span> <span class="va">$JOB</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="st">'exec_host'</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="at">-F</span><span class="st">' = '</span> <span class="st">'{print $2}'</span><span class="va">)</span></span>
<span id="cb16-61"><a href="#cb16-61"></a>    <span class="bu">echo</span> <span class="st">"Job: </span><span class="va">$JOB</span><span class="st"> runs on nodes: </span><span class="va">$NODES</span><span class="st">"</span></span>
<span id="cb16-62"><a href="#cb16-62"></a><span class="cf">done</span></span>
<span id="cb16-63"><a href="#cb16-63"></a><span class="in">```</span></span>
<span id="cb16-64"><a href="#cb16-64"></a></span>
<span id="cb16-65"><a href="#cb16-65"></a>You can save this script, make it executable using <span class="in">`chmod guo=rwx`</span> (on Arch Linux on Lengau) <span class="in">`chmod +x script_name.sh`</span> (on other Linux distributions), and then run it:</span>
<span id="cb16-66"><a href="#cb16-66"></a></span>
<span id="cb16-67"><a href="#cb16-67"></a><span class="in">```bash</span></span>
<span id="cb16-68"><a href="#cb16-68"></a><span class="ex">./script_name.sh</span> <span class="op">&lt;</span>username<span class="op">&gt;</span></span>
<span id="cb16-69"><a href="#cb16-69"></a><span class="in">```</span></span>
<span id="cb16-70"><a href="#cb16-70"></a></span>
<span id="cb16-71"><a href="#cb16-71"></a>**Note**: The specifics, especially the parsing bits, can vary based on one's exact PBSPro setup and version. Adjust the script accordingly. Always refer to the official PBSPro documentation or local documentation provided by your HPC center for precise details.</span>
<span id="cb16-72"><a href="#cb16-72"></a></span>
<span id="cb16-73"><a href="#cb16-73"></a><span class="fu">## How to delete or terminate a user's specific job</span></span>
<span id="cb16-74"><a href="#cb16-74"></a></span>
<span id="cb16-75"><a href="#cb16-75"></a><span class="ss">1. </span>**Find the user's running jobs**:</span>
<span id="cb16-76"><a href="#cb16-76"></a></span>
<span id="cb16-77"><a href="#cb16-77"></a>Use the <span class="in">`qstat`</span> command to fetch the list of jobs associated with a user:</span>
<span id="cb16-78"><a href="#cb16-78"></a></span>
<span id="cb16-79"><a href="#cb16-79"></a><span class="in">```bash</span></span>
<span id="cb16-80"><a href="#cb16-80"></a><span class="ex">qstat</span> <span class="at">-u</span> <span class="op">&lt;</span>username<span class="op">&gt;</span></span>
<span id="cb16-81"><a href="#cb16-81"></a><span class="in">```</span></span>
<span id="cb16-82"><a href="#cb16-82"></a></span>
<span id="cb16-83"><a href="#cb16-83"></a><span class="ss">2. </span>**Extract the Job IDs and delete them**:</span>
<span id="cb16-84"><a href="#cb16-84"></a></span>
<span id="cb16-85"><a href="#cb16-85"></a>You can use the <span class="in">`qdel`</span> command to delete specific jobs. </span>
<span id="cb16-86"><a href="#cb16-86"></a></span>
<span id="cb16-87"><a href="#cb16-87"></a><span class="in">```bash</span></span>
<span id="cb16-88"><a href="#cb16-88"></a><span class="ex">qdel</span> <span class="at">-W</span> force <span class="op">&lt;</span>job.name<span class="op">&gt;</span></span>
<span id="cb16-89"><a href="#cb16-89"></a><span class="in">```</span></span>
<span id="cb16-90"><a href="#cb16-90"></a></span>
<span id="cb16-91"><a href="#cb16-91"></a><span class="fu">## How to terminate a multi-node compute job</span></span>
<span id="cb16-92"><a href="#cb16-92"></a></span>
<span id="cb16-93"><a href="#cb16-93"></a>Terminating a multi-node compute cluster in a PBSPro environment typically involves deleting or cancelling the job that has been submitted:</span>
<span id="cb16-94"><a href="#cb16-94"></a></span>
<span id="cb16-95"><a href="#cb16-95"></a><span class="ss">1. </span>**Using Job ID**:</span>
<span id="cb16-96"><a href="#cb16-96"></a></span>
<span id="cb16-97"><a href="#cb16-97"></a><span class="ss">   - </span>First, identify the Job ID of the running job. You can use the <span class="in">`qstat`</span> command to list all the jobs you have submitted:</span>
<span id="cb16-98"><a href="#cb16-98"></a>   </span>
<span id="cb16-99"><a href="#cb16-99"></a><span class="in">```bash</span></span>
<span id="cb16-100"><a href="#cb16-100"></a><span class="ex">qstat</span> <span class="at">-u</span> <span class="op">&lt;</span>your_username<span class="op">&gt;</span></span>
<span id="cb16-101"><a href="#cb16-101"></a><span class="in">```</span></span>
<span id="cb16-102"><a href="#cb16-102"></a></span>
<span id="cb16-103"><a href="#cb16-103"></a><span class="ss">   - </span>Once you have identified the Job ID of the job you wish to terminate, you can use the <span class="in">`qdel`</span> command to delete it:</span>
<span id="cb16-104"><a href="#cb16-104"></a></span>
<span id="cb16-105"><a href="#cb16-105"></a><span class="in">```bash</span></span>
<span id="cb16-106"><a href="#cb16-106"></a><span class="ex">qdel</span> <span class="op">&lt;</span>Job_ID<span class="op">&gt;</span></span>
<span id="cb16-107"><a href="#cb16-107"></a><span class="in">```</span></span>
<span id="cb16-108"><a href="#cb16-108"></a></span>
<span id="cb16-109"><a href="#cb16-109"></a>This will terminate the job and free up the resources that were being used across the multiple nodes.</span>
<span id="cb16-110"><a href="#cb16-110"></a></span>
<span id="cb16-111"><a href="#cb16-111"></a><span class="ss">2. </span>**Using Job Name**:</span>
<span id="cb16-112"><a href="#cb16-112"></a></span>
<span id="cb16-113"><a href="#cb16-113"></a><span class="ss">   - </span>If you know the name of the job, you can also use it to delete the job:</span>
<span id="cb16-114"><a href="#cb16-114"></a></span>
<span id="cb16-115"><a href="#cb16-115"></a><span class="in">```bash</span></span>
<span id="cb16-116"><a href="#cb16-116"></a><span class="ex">qdel</span> <span class="at">-N</span> <span class="op">&lt;</span>Job_Name<span class="op">&gt;</span></span>
<span id="cb16-117"><a href="#cb16-117"></a><span class="in">```</span></span>
<span id="cb16-118"><a href="#cb16-118"></a> </span>
<span id="cb16-119"><a href="#cb16-119"></a><span class="ss">3. </span>**Deleting All User Jobs**:</span>
<span id="cb16-120"><a href="#cb16-120"></a></span>
<span id="cb16-121"><a href="#cb16-121"></a><span class="ss">   - </span>If you want to delete all the jobs you have submitted, you can use the following command:</span>
<span id="cb16-122"><a href="#cb16-122"></a></span>
<span id="cb16-123"><a href="#cb16-123"></a><span class="in">```bash</span></span>
<span id="cb16-124"><a href="#cb16-124"></a><span class="ex">qdel</span> <span class="kw">`</span><span class="ex">qselect</span> <span class="at">-u</span> <span class="op">&lt;</span>your_username<span class="op">&gt;</span><span class="kw">`</span></span>
<span id="cb16-125"><a href="#cb16-125"></a><span class="in">```</span></span>
<span id="cb16-126"><a href="#cb16-126"></a></span>
<span id="cb16-127"><a href="#cb16-127"></a><span class="ss">4. </span>**Interactive Mode**:</span>
<span id="cb16-128"><a href="#cb16-128"></a></span>
<span id="cb16-129"><a href="#cb16-129"></a><span class="ss">   - </span>If you are in an interactive session, you can simply type <span class="in">`exit`</span> or press <span class="in">`CTRL+D`</span> to terminate the session, and the job will be terminated.</span>
<span id="cb16-130"><a href="#cb16-130"></a></span>
<span id="cb16-131"><a href="#cb16-131"></a>The above assumes you have the necessary permissions to delete the job. You should ensure that there is no unsaved work as terminating the job will discard all the unsaved progress. Always be cautious and double-check the Job ID or Job Name to avoid terminating the wrong job. Different clusters might have slightly different configurations, so it might be best to consult the specific documentation of your environment or get in touch with the system administrator for detailed guidance.</span>
<span id="cb16-132"><a href="#cb16-132"></a></span>
<span id="cb16-133"><a href="#cb16-133"></a><span class="fu">## How many jobs are ahead of mine?</span></span>
<span id="cb16-134"><a href="#cb16-134"></a></span>
<span id="cb16-135"><a href="#cb16-135"></a>To find out where in the queue your job is located, you can use the <span class="in">`qstat`</span> command with various options to filter and view the status of the jobs:</span>
<span id="cb16-136"><a href="#cb16-136"></a></span>
<span id="cb16-137"><a href="#cb16-137"></a><span class="ss">1. </span>**List all jobs in the queue:**</span>
<span id="cb16-138"><a href="#cb16-138"></a></span>
<span id="cb16-139"><a href="#cb16-139"></a><span class="in">```bash</span></span>
<span id="cb16-140"><a href="#cb16-140"></a><span class="ex">qstat</span></span>
<span id="cb16-141"><a href="#cb16-141"></a><span class="in">```</span></span>
<span id="cb16-142"><a href="#cb16-142"></a></span>
<span id="cb16-143"><a href="#cb16-143"></a>This will display all jobs in the queue, showing their IDs, names, usernames, time used, and their statuses (e.g., Running, Queued, etc.).</span>
<span id="cb16-144"><a href="#cb16-144"></a></span>
<span id="cb16-145"><a href="#cb16-145"></a><span class="ss">2. </span>**Find a specific job in the queue:**</span>
<span id="cb16-146"><a href="#cb16-146"></a></span>
<span id="cb16-147"><a href="#cb16-147"></a>  Once you knows the Job ID of one's submitted job, you can use this command to display information specifically for that job:</span>
<span id="cb16-148"><a href="#cb16-148"></a></span>
<span id="cb16-149"><a href="#cb16-149"></a><span class="in">```bash</span></span>
<span id="cb16-150"><a href="#cb16-150"></a><span class="ex">qstat</span> <span class="op">&lt;</span>job_id<span class="op">&gt;</span></span>
<span id="cb16-151"><a href="#cb16-151"></a><span class="in">```</span></span>
<span id="cb16-152"><a href="#cb16-152"></a></span>
<span id="cb16-153"><a href="#cb16-153"></a>Replace <span class="in">`&lt;job_id&gt;`</span> with your job ID.</span>
<span id="cb16-154"><a href="#cb16-154"></a></span>
<span id="cb16-155"><a href="#cb16-155"></a><span class="ss">3. </span>**Find the position of a specific job in the queue:**</span>
<span id="cb16-156"><a href="#cb16-156"></a></span>
<span id="cb16-157"><a href="#cb16-157"></a>You can use the <span class="in">`qstat`</span> command with some Unix commands to find out the position of your job:</span>
<span id="cb16-158"><a href="#cb16-158"></a>   </span>
<span id="cb16-159"><a href="#cb16-159"></a><span class="in">```bash</span></span>
<span id="cb16-160"><a href="#cb16-160"></a><span class="ex">qstat</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-B</span> 10 <span class="st">"&lt;job_id&gt;"</span> <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 10</span>
<span id="cb16-161"><a href="#cb16-161"></a><span class="in">```</span></span>
<span id="cb16-162"><a href="#cb16-162"></a></span>
<span id="cb16-163"><a href="#cb16-163"></a>This command will show you the 10 jobs before your own job in the queue, giving an idea of your job’s position relative to others.</span>
<span id="cb16-164"><a href="#cb16-164"></a></span>
<span id="cb16-165"><a href="#cb16-165"></a><span class="ss">4. </span>**Customise the display to make the position more apparent:**</span>
<span id="cb16-166"><a href="#cb16-166"></a></span>
<span id="cb16-167"><a href="#cb16-167"></a>You can customise the <span class="in">`qstat`</span> output using various options to display specific columns or order the jobs in a particular manner to make it easier to locate your job and infer its position.</span>
<span id="cb16-168"><a href="#cb16-168"></a></span>
<span id="cb16-169"><a href="#cb16-169"></a>   For example, to display jobs in the order they are queued:</span>
<span id="cb16-170"><a href="#cb16-170"></a> </span>
<span id="cb16-171"><a href="#cb16-171"></a><span class="in">```bash</span></span>
<span id="cb16-172"><a href="#cb16-172"></a><span class="ex">qstat</span> <span class="at">-a</span></span>
<span id="cb16-173"><a href="#cb16-173"></a><span class="in">```</span></span>
<span id="cb16-174"><a href="#cb16-174"></a></span>
<span id="cb16-175"><a href="#cb16-175"></a>The <span class="in">`-a`</span> option displays more details, and you can then manually locate your job to determine its position in the queue.</span>
<span id="cb16-176"><a href="#cb16-176"></a></span>
<span id="cb16-177"><a href="#cb16-177"></a>The position in the queue might not always accurately represent when your job will start executing because the actual scheduling and execution of jobs depend on various factors, such as job priorities, requested resources, and the scheduler's configuration and policies. </span>
<span id="cb16-178"><a href="#cb16-178"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© 2025, AJ Smit</p>
</div>   
    <div class="nav-footer-center">

<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/ajsmit/tangled_bank/edit/main/vignettes/PBSPro_users.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/ajsmit/tangled_bank/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div><div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




<script src="../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>